!function e(t,n,a){function s(r,l){if(!n[r]){if(!t[r]){var o="function"==typeof require&&require;if(!l&&o)return o(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return s(n?n:e)},u,u.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)s(a[r]);return s}({1:[function(e,t,n){!function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/annotation-from-sofa.html",'<span class="document-text">{{preText}}<span class="annotation">&thinsp;{{annotationText}}&thinsp;</span>{{postText}}</span>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/bio-main.html",'<navbar></navbar>\n<div class="page-header">\n    <h1>NLP Type and Annotation Browser</h1>\n    <h4>A system for integration and visualization of diverse biomedical NLP applications.</h4>\n</div>\n\n<div class="row marketing">\n    <div class="col-md-12">\n        <h4>Overview</h4>\n\n        <p>\n            NLP-TAB is a web-based system designed to allow researchers and developers of Natural Language Processing\n            (NLP) systems to compare the output of several disparate NLP systems to each other or to a manually created\n            reference standard. The comparison is performed by running the NLP systems on a single corpus of text with\n            subsequent statistical analysis of co-occurences between annotations generated by NLP systems. Analysis\n            results are stored and indexed using the Elasticsearch technology and displayed to end users with a custom\n            web-based interface. NLP-TAB operates in two modes: Annotation Analysis and Type System Analysis as\n            described below. The system is still early in its development - new features and improvements will be added\n            in the course of next several months, so you don\'t find what you need right now, please check back later.\n        </p>\n    </div>\n</div>\n\n<div class="row marketing">\n    <div class="marketing-column">\n        <h4>Documents</h4>\n        <p>\n            The Documents section allows for the exploration of the documents run through each of the analyzed systems.\n            You can filter to find specific text in documents, below are a few examples:</p>\n        <ul>\n\n        </ul>\n        <p>\n            When exploring the documents you can select ranges of text in order to see which systems annotate the text\n            with which types. You can select types to see their instances.\n        </p>\n        <h4>Type System Analysis</h4>\n\n        <p>\n            Type system analysis performs the comparison between annotation types generated by the different NLP systems\n            by first counting how often pairs of annotations from different NLP systems cover approximately the same\n            text and how often they cover completely different text. This co-occurence information is used to generate\n            2X2 tables for all pairs of annotation types in order to calculate the degree of dependence between\n            annotation types using common metrics which at present include the F-score, Jaccard and Matthews\n            coefficients. Pairs of annotation types with higher scores are more likely to be functionally equivalent.\n        </p>\n\n        <h4>Type Systems</h4>\n\n        <p>\n            The type systems screen allows for users to explore the type systems that have been uploaded to the system,\n            browsing the individual types in each system. Information included on the type systems page:\n        </p>\n\n        <ul>\n            <li>Basic information about types, their super and subtypes, and their occurrences</li>\n            <li>Primitive features, their common values and distribution breakdowns</li>\n            <li>Reference features, and what types they link to</li>\n            <li>Instances of specific types</li>\n        </ul>\n\n        <h4>Elasticsearch Backend</h4>\n\n        <p>\n            NLP-TAB uses an Elasticsearch backend to store Common Annotation Structure (CAS) information produced by\n            each NLP system being compared for each document in the collection. A read-only api to the backend is\n            accessible at <a href="/elasticsearch">athena.ahc.umn.edu/elasticsearch</a>. For more information on\n            elasticsearch, you can visit their website at <a href="http://www.elasticsearch.org/">elasticsearch.org</a>.\n        </p>\n\n        <h4>Source Code</h4>\n\n        <p>\n            NLP-TAB is open source and is distributed under the Apache (ASL 2.0) license. We\'ve made it available at\n            Bitbucket. The repositories contain additional instructions and documentation.\n        </p>\n        <dl class="dl-horizontal">\n            <dt>UIMA and Analysis</dt>\n            <dd><a href="https://bitbucket.org/nlpie/nlptab">bitbucket.org/nlpie/nlptab</a></dd>\n            <dt>Web Application</dt>\n            <dd><a href="https://bitbucket.org/nlpie/nlptab-webapp">bitbucket.org/nlpie/nlptab-webapp</a></dd>\n        </dl>\n    </div>\n    <div class="marketing-column">\n\n        <h4>About Us</h4>\n\n        <p>\n            NLP-TAB is developed by the <a href="http://www.bmhi.umn.edu/ihi/research/nlpie/">University of Minnesota\n            Institute for Health Informatics NLP/IE Group</a> and the <a href="http://ohnlp.org/index.php/Main_Page">Open\n            Health NLP Consortium</a>.\n        </p>\n\n        <h4>Other Resources</h4>\n\n        <h5>BioMedICUS</h5>\n\n        <ul>\n        	<li><a href="http://athena.ahc.umn.edu/biomedicus/">Demo</a></li>\n        	<li><a href="https://bitbucket.org/nlpie/biomedicus">Source Code</a></li>\n        </ul>\n\n        <h5>NLP-TAB</h5>\n\n        <ul>\n        	<li><a href="http://athena.ahc.umn.edu/nlptab">Demo</a></li>\n        	<li><a href="http://bitbucket.org/nlpie/nlptab">Java Source Code</a></li>\n        	<li><a href="http://bitbucket.org/nlpie/nlptab-webapp">Web-app</a></li>\n        	<li><a href="http://bitbucket.org/nlpie/nlptab-corpus">Corpus</a></li>\n        </ul>\n\n        <h5>NLP/IE Group Resources</h5>\n\n        <ul>\n        	<li><a href="http://www.bmhi.umn.edu/ihi/research/nlpie/resources/index.htm">Website</a></li>\n        	<li><a href="http://athena.ahc.umn.edu/">Demos</a></li>\n        </ul>\n\n        <h4>Acknowledgements</h4>\n\n        <p>\n            Funding for this work was provided by:\n        </p>\n        <ul>\n            <li>1 R01 LM011364-01 NIH-NLM</li>\n            <li>1 R01 GM102282-01A1 NIH-NIGMS</li>\n            <li>U54 RR026066-01A2 NIH-NCRR</li>\n        </ul>\n\n    </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/breadcrumb.html","<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n</head>\n<body>\n\n</body>\n</html>")}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/feature-values.html",'<div>\n  <h4>Common Values:</h4>\n  <table class="table table-bordered">\n    <thead>\n    <tr>\n      <th>Value</th>\n      <th>Count</th>\n      <th>Percentage</th>\n    </tr>\n    </thead>\n    <tr ng-repeat="value in values">\n      <td>{{value.key}}</td>\n      <td>{{value.doc_count}}</td>\n      <td>{{(100.0 * value.doc_count / count) | number: 2}}</td>\n    </tr>\n  </table>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/fs-instance-info.html",'<div ng-if="featureStructure">\n    <div>\n        <h5>Associated Text</h5>\n        <annotation-from-sofa feature-structure="featureStructure"></annotation-from-sofa>\n    </div>\n    <div>\n        <h5>Basic Info</h5>\n        <dl class="dl-horizontal">\n            <dt>ElasticSearch Id</dt>\n            <dd>{{featureStructure._id}}</dd>\n            <dt>Type</dt>\n            <dd><type-name name="featureStructure.primaryType" system-index="featureStructure._index"></type-name></dd>\n        </dl>\n    </div>\n    <div ng-if="featureStructure.stringFeatures">\n        <h5>String Features</h5>\n        <table class="table">\n            <thead>\n            <tr>\n                <th class="col-md-4">Feature Name</th>\n                <th class="col-md-8">Feature Value</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="(featureName, featureValue) in featureStructure.stringFeatures">\n                <td>\n                    <feature-name name="featureName" system-index="featureStructure._index"></feature-name>\n                </td>\n                <td><potential-cui value="featureValue"></potential-cui></td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div ng-if="featureStructure.intFeatures">\n        <h5>Integer Features</h5>\n        <table class="table">\n            <thead>\n                <tr>\n                    <th class="col-md-4">Feature Name</th>\n                    <th class="col-md-8">Feature Value</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="(featureName, featureValue) in featureStructure.intFeatures">\n                    <td>\n                        <feature-name name="featureName" system-index="featureStructure._index"></feature-name>\n                    </td>\n                    <td>{{featureValue}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    <div ng-if="featureStructure.booleanFeatures">\n        <h5>Boolean Features</h5>\n        <table class="table">\n            <thead>\n            <tr>\n                <th class="col-md-4">Feature Name</th>\n                <th class="col-md-8">Feature Value</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="(featureName, featureValue) in featureStructure.booleanFeatures">\n                <td>\n                    <feature-name name="featureName" system-index="featureStructure._index"></feature-name>\n                </td>\n                <td>{{featureValue && {true: \'true\', false: \'false\'}[featureValue]}} </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <div ng-if="featureStructure.references && !isEmpty(featureStructure.references)">\n        <h5>References</h5>\n        <table class="table">\n            <thead>\n            <tr>\n                <th class="col-md-4">Feature Name</th>\n                <th class="col-md-8">Feature Structure Reference Id</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="(featureName, referenceId) in featureStructure.references">\n                <td>\n                    <feature-name name="featureName" system-index="featureStructure._index"></feature-name>\n                </td>\n                <td>\n                    <fs-instance-id system-index="featureStructure._index" fs-id="referenceId"></fs-instance-id>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <div ng-if="featureStructure.arrayItems && featureStructure.arrayItems.length > 0">\n        <h5>Array Items</h5>\n        <ul class="list-unstyled">\n            <li ng-repeat="arrayItem in featureStructure.arrayItems">\n                <fs-instance-id system-index="featureStructure._index" fs-id="arrayItem"></fs-instance-id>\n            </li>\n        </ul>\n    </div>\n\n</div>\n<div ng-if="!featureStructure">\n    <h4>Feature Structure was not found. This is potentially because the type was set to be ignored.</h4>\n</div>\n\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/fs-instance-modal.html",'<div class="modal-header">\n    <h3 class="modal-title">FeatureStructure Instance Info</h3>\n</div>\n<div class="modal-body">\n    <fs-instance-info feature-structure="featureStructure" system-index="systemIndex"></fs-instance-info>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="done()">Done</button>\n</div>')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/main.html",'<navbar></navbar>\n<div class="page-header">\n    <h1>NLP Type and Annotation Browser</h1>\n    <h4>A system for integration and visualization of diverse biomedical NLP applications.</h4>\n</div>\n\n<div class="row marketing">\n    <div class="col-md-12">\n        <h4>Overview</h4>\n\n        <p>\n            NLP-TAB is a web-based system designed to allow researchers and developers of Natural Language Processing\n            (NLP) systems to compare the output of several disparate NLP systems to each other or to a manually created\n            reference standard. The comparison is performed by running the NLP systems on a single corpus of text with\n            subsequent statistical analysis of co-occurences between annotations generated by NLP systems. Analysis\n            results are stored and indexed using the Elasticsearch technology and displayed to end users with a custom\n            web-based interface. NLP-TAB operates in two modes: Annotation Analysis and Type System Analysis as\n            described below. The system is still early in its development - new features and improvements will be added\n            in the course of next several months, so you don\'t find what you need right now, please check back later.\n        </p>\n    </div>\n</div>\n\n<div class="row marketing">\n    <div class="marketing-column">\n        <h4>Documents</h4>\n        <p>\n            The Documents section allows for the exploration of the documents run through each of the analyzed systems.\n            You can filter to find specific text in documents, below are a few examples:</p>\n        <ul>\n            <li><a href="#/document-search?q=myocardial%20infarction">Myocardial Infarction</a></li>\n            <li><a href="#/document-search?q=neurontin">Neurontin</a></li>\n            <li><a href="#/document-search?q=HF">HF</a></li>\n            <li><a href="#/document-search?q=8%20mg%20q%206%20hrs">6 mg q 6 hrs</a></li>\n        </ul>\n        <p>\n            When exploring the documents you can select ranges of text in order to see which systems annotate the text\n            with which types. You can select types to see their instances.\n        </p>\n        <h4>Type System Analysis</h4>\n\n        <p>\n            Type system analysis performs the comparison between annotation types generated by the different NLP systems\n            by first counting how often pairs of annotations from different NLP systems cover approximately the same\n            text and how often they cover completely different text. This co-occurence information is used to generate\n            2X2 tables for all pairs of annotation types in order to calculate the degree of dependence between\n            annotation types using common metrics which at present include the F-score, Jaccard and Matthews\n            coefficients. Pairs of annotation types with higher scores are more likely to be functionally equivalent.\n        </p>\n\n        <h4>Type Systems</h4>\n\n        <p>\n            The type systems screen allows for users to explore the type systems that have been uploaded to the system,\n            browsing the individual types in each system. Information included on the type systems page:\n        </p>\n\n        <ul>\n            <li>Basic information about types, their super and subtypes, and their occurrences</li>\n            <li>Primitive features, their common values and distribution breakdowns</li>\n            <li>Reference features, and what types they link to</li>\n            <li>Instances of specific types</li>\n        </ul>\n\n        <h4>Elasticsearch Backend</h4>\n\n        <p>\n            NLP-TAB uses an Elasticsearch backend to store Common Annotation Structure (CAS) information produced by\n            each NLP system being compared for each document in the collection. A read-only api to the backend is\n            accessible at <a href="/elasticsearch">athena.ahc.umn.edu/elasticsearch</a>. For more information on\n            elasticsearch, you can visit their website at <a href="http://www.elasticsearch.org/">elasticsearch.org</a>.\n        </p>\n\n        <h4>Source Code</h4>\n\n        <p>\n            NLP-TAB is open source and is distributed under the Apache (ASL 2.0) license. We\'ve made it available at\n            Bitbucket. The repositories contain additional instructions and documentation.\n        </p>\n        <dl class="dl-horizontal">\n            <dt>UIMA and Analysis</dt>\n            <dd><a href="https://bitbucket.org/nlpie/nlptab">bitbucket.org/nlpie/nlptab</a></dd>\n            <dt>Web Application</dt>\n            <dd><a href="https://bitbucket.org/nlpie/nlptab-webapp">bitbucket.org/nlpie/nlptab-webapp</a></dd>\n        </dl>\n    </div>\n    <div class="marketing-column">\n        <h4>About Us</h4>\n\n        <p>\n            NLP-TAB is developed by the <a href="http://www.bmhi.umn.edu/ihi/research/nlpie/">University of Minnesota\n            Institute for Health Informatics NLP/IE Group</a> and the <a href="http://ohnlp.org/index.php/Main_Page">Open\n            Health NLP Consortium</a>.\n        </p>\n\n        <h4>Other Resources</h4>\n\n        <h5>BioMedICUS</h5>\n\n        <ul>\n        	<li><a href="http://athena.ahc.umn.edu/biomedicus/">Demo</a></li>\n        	<li><a href="https://bitbucket.org/nlpie/biomedicus">Source Code</a></li>\n        </ul>\n\n        <h5>NLP-TAB</h5>\n\n        <ul>\n        	<li><a href="http://athena.ahc.umn.edu/nlptab">Demo</a></li>\n        	<li><a href="http://bitbucket.org/nlpie/nlptab">Java Source Code</a></li>\n        	<li><a href="http://bitbucket.org/nlpie/nlptab-webapp">Web-app</a></li>\n        	<li><a href="http://bitbucket.org/nlpie/nlptab-corpus">Corpus</a></li>\n        </ul>\n\n        <h5>NLP/IE Group Resources</h5>\n\n        <ul>\n        	<li><a href="http://www.bmhi.umn.edu/ihi/research/nlpie/resources/index.htm">Website</a></li>\n        	<li><a href="http://athena.ahc.umn.edu/">Demos</a></li>\n        </ul>\n\n        <h4>Acknowledgements</h4>\n\n        <p>\n            Funding for this work was provided by:\n        </p>\n        <ul>\n            <li>1 R01 LM011364-01 NIH-NLM</li>\n            <li>1 R01 GM102282-01A1 NIH-NIGMS</li>\n            <li>U54 RR026066-01A2 NIH-NCRR</li>\n        </ul>\n\n    </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/common/navbar.html",'<nav class="navbar navbar-default" role="navigation">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <a href="#/main" class="navbar-brand">NLP-TAB</a>\n    </div>\n    <ul class="nav navbar-nav">\n      <li navbar-link="document-search"><a href="#/document-search">Documents</a></li>\n      <li navbar-link="systems"><a href="#/type-systems">Type Systems</a></li>\n      <li navbar-link="analysis"><a href="#/analysis">Type Systems Analysis</a></li>\n    </ul>\n  </div>\n</nav>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/annotation_analysis/document-search-explore.html",'<navbar selected-link="\'document-search\'"></navbar>\n<main id="document-search-explore">\n    <div id="document">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <h3 class="panel-title">Document Text</h3>\n            </div>\n            <div class="panel-body" ng-mousedown="clearSelectedText()" ng-mouseup="checkSelectedText()">\n                <highlighted-text range="highlightedRange" text="sofaText"></highlighted-text>\n            </div>\n            <div class="panel-footer">\n                <div class="span-editor">\n                        <span class="span-begin-editor">\n                            <span-editor value="textSpan.begin" min="0" max="textSpan.end">Begin</span-editor>\n                        </span>\n                        <span class="span-end-editor">\n                            <span-editor value="textSpan.end" min="textSpan.begin" max="sofaText.length">End\n                            </span-editor>\n                        </span>\n                </div>\n                <!-- span-editor -->\n            </div>\n            <!-- panel-footer -->\n        </div>\n        <!-- panel -->\n        <p><i>You can also select text with the mouse.</i></p>\n    </div>\n    <!-- document -->\n    <div id="annotations">\n        <fs-types-in-span-table></fs-types-in-span-table>\n    </div>\n    <!-- annotations -->\n    <div id="details" ng-if="selectedTypeInSystem">\n        <examples-in-span></examples-in-span>\n    </div>\n    <!-- details -->\n</main>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/annotation_analysis/document-search.html",'<navbar selected-link="\'document-search\'"></navbar>\n<div id="document-search-results">\n    <table class="table">\n        <thead>\n        <tr>\n            <th colspan="2">\n                <h2>Documents</h2>\n            </th>\n        </tr>\n        <tr>\n            <th>\n                <h4>Filter</h4>\n                <input type="text" placeholder="Filter Text with Phrase"\n                       class="form-control" id="queryString" ng-model="queryString">\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-show="fetching">\n            <td>\n                <div class="center-block" activity-indicator></div>\n            </td>\n        </tr>\n        <tr ng-repeat="sofa in sofas">\n            <td>\n                <highlighted-text text="sofa.text" range="ranges[$index]"></highlighted-text>\n            </td>\n            <td class="explore-cell">\n                <a type="button" class="btn btn-xs btn-primary"\n                   ng-href="#/document-search/explore/{{sofa.identifier}}?begin={{ranges[$index].outer.begin}}&end={{ranges[$index].outer.end}}">Explore\n                    <span class="glyphicon glyphicon-arrow-right"></span></a>\n            </td>\n        </tr>\n        <tr ng-if="sofas.length === 0">\n            <td colspan="2" class="text-vert-middle text-center">\n                <h3>No Results Found</h3>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n\n    <div class="text-center">\n        <uib-pagination ng-model="pagination.page" items-per-page="pagination.itemsPerPage"\n                    total-items="pagination.totalItems" max-size="15" boundary-links="true"></uib-pagination>\n    </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/annotation_analysis/examples-in-span.html",'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title">\n            <type-name name="selectedTypeInSystem.type"\n                       system-index="selectedTypeInSystem.systemIndex"></type-name>&nbsp;\n            <small>Details</small>\n        </h3>\n    </div>\n    <div class="panel-body">\n        <fs-instance-info feature-structure="featureStructure"></fs-instance-info>\n    </div>\n    <!-- panel-body -->\n</div>\n<div class="text-center">\n    <uib-pagination ng-model="pagination.page" items-per-page="pagination.itemsPerPage"\n                total-items="pagination.totalItems" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="7"\n                class="pagination-sm" boundary-links="true" first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/annotation_analysis/fs-types-in-span-table.html",'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title annotations-title">\n            <span>FeatureStructure types in selected text</span>\n        </h3>\n    </div>\n    <table class="table table-hover">\n        <tr ng-show="fetching">\n            <td>\n                <div class="center-block" activity-indicator>\n                </div>\n            </td>\n        </tr>\n        <tr ng-repeat="typeInSystem in typeInSystems | startAt: from | limitTo: pagination.itemsPerPage">\n            <td class="title-subtitle-detail-cell"\n                ng-class="{true: \'info\', false: \'\'}[selectedTypeInSystem && typeInSystem === selectedTypeInSystem]"\n                ng-click="selectTypeInSystem(typeInSystem, typeInSystems.indexOf(typeInSystem))">\n                <span class="title">\n                    <type-name name="typeInSystem.type" unlinked></type-name>\n                </span>\n                <span class="subtitle">\n                    <system-name system-index="typeInSystem.systemIndex"></system-name>\n                </span>\n                <span class="detail">{{typeInSystem.count | number : 0}}</span>\n            </td>\n        </tr>\n    </table>\n</div>\n<!-- panel -->\n<div class="text-center">\n    <uib-pagination ng-model="pagination.page" items-per-page="pagination.itemsPerPage"\n                total-items="pagination.totalItems" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="5"\n                class="pagination-sm"></uib-pagination>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/annotation_analysis/span-editor.html",'<button class="btn btn-xs" ng-click="decrement()" ng-class="{true: \'\', false: \'disabled\'}[canDecrement()]">\n    <span class="glyphicon glyphicon-arrow-left"></span>\n</button>\nSpan <span ng-transclude></span>: {{value}}\n<button class="btn btn-xs" ng-click="increment()" ng-class="{true: \'\', false: \'disabled\'}[canIncrement()]">\n    <span class="glyphicon glyphicon-arrow-right"></span>\n</button>')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/boolean-primitive-feature.html",'<div>\n    <h4>Values:</h4>\n    <table class="table table-bordered">\n        <thead>\n        <tr>\n            <th>Value</th>\n            <th>Count</th>\n            <th>Percentage</th>\n        </tr>\n        </thead>\n        <tr ng-repeat="boolValue in bool.values">\n            <td>{{boolValue.key}}</td>\n            <td>{{boolValue.doc_count}}</td>\n            <td>{{(100.0 * boolValue.doc_count / bool.count) | number: 2}}</td>\n        </tr>\n    </table>\n    <p>{{bool.missing.doc_count}} instances are missing values for this feature. {{100.0 * bool.missing.doc_count / bool.count | number: 2}}% of total</p>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/float-primitive-feature.html",'<div>\n    <h4>Percentiles:</h4>\n    <table class="table table-bordered">\n        <thead>\n        <tr>\n            <th>Percentile</th>\n            <th>Value</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="percentileObject in float.percentiles | orderBy:\'percentile\'">\n            <td>{{percentileObject.percentile | number: 1}}%</td>\n            <td>{{percentileObject.count | number: 2}}</td>\n        </tr>\n        </tbody>\n        <tfoot>\n        <tr>\n            <td colspan="2">\n                <p>{{float.missing.doc_count}} instances are missing values. {{100.0 * float.missing.doc_count / float.count | number: 2}}% of total</p>\n            </td>\n        </tr>\n        </tfoot>\n    </table>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/instances-detail.html",'<div ng-if="childTypes.length > 1">\n  <h4>Child Types&nbsp;\n    <small><a ng-click="invertTypeSelection()">Invert Selection</a></small>\n  </h4>\n  <div>\n    <button style="margin: 2px"\n            ng-repeat="childType in childTypes" class="btn btn-xs"\n            ng-class="{\'true\': \'btn-primary\', \'false\': \'btn-danger\'}[childType.isSelected]"\n            ng-click="toggleType($index)">\n      <type-name name="childType.name" unlinked></type-name>\n    </button>\n  </div>\n</div>\n<div class="panel panel-default" ng-if="featureStructureInstance">\n  <div class="panel-heading">\n    <div class="row">\n      <div class="col-md-2 text-left">\n        <a ng-if="instancesPagination.hasLowerPages()" ng-click="instancesPagination.decrement()">Previous</a>\n      </div>\n      <div class="col-md-8 text-center">\n        <h3 class="panel-title">Instance {{instancesPagination.page}} of {{instancesPagination.totalItems}} - Type:&nbsp;\n          <type-name name="featureStructureInstance.primaryType" system-index="systemIndex"></type-name>\n        </h3>\n      </div>\n      <div class="col-md-2 text-right">\n        <a ng-if="instancesPagination.hasHigherPages()" ng-click="instancesPagination.increment()">Next</a>\n      </div>\n    </div>\n  </div>\n  <div class="panel-body">\n    <div ng-if="featureStructureInstance">\n      <fs-instance-info feature-structure="featureStructureInstance"></fs-instance-info>\n    </div>\n  </div>\n</div>\n<div class="text-center">\n  <uib-pagination ng-if="featureStructureInstance" items-per-page="instancesPagination.itemsPerPage"\n              total-items="instancesPagination.totalItems" ng-model="instancesPagination.page" max-size="15"\n              boundary-links="true"></uib-pagination>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/int-primitive-feature.html",'<div>\n    <h4>Percentiles:</h4>\n    <table class="table table-bordered">\n        <thead>\n        <tr>\n            <th>Percentile</th>\n            <th>Value</th>\n        </tr>\n        </thead>\n        <tr ng-repeat="percentileObject in int.percentiles | orderBy:\'percentile\'">\n            <td>{{percentileObject.percentile | number: 1}}%</td>\n            <td>{{percentileObject.count | number: 0}}</td>\n        </tr>\n    </table>\n    <h4>Common Values:</h4>\n    <table class="table table-bordered">\n        <thead>\n        <tr>\n            <th>Value</th>\n            <th>Occurrences</th>\n            <th>Percentage</th>\n        </tr>\n        </thead>\n        <tr ng-repeat="intValue in int.values">\n            <td>{{intValue.key}}</td>\n            <td>{{intValue.doc_count}}</td>\n            <td>{{(100.0 * intValue.doc_count / int.count) | number: 2}}</td>\n        </tr>\n        <tfoot>\n        <tr>\n            <td colspan="3">\n                <p>Approximately {{int.otherUniqueValues.value - int.values.length}} other unique values not shown here.</p>\n                <p>{{int.missing.doc_count}} instances are missing values. {{100.0 * int.missing.doc_count / int.count | number: 2}}% of total</p>\n            </td>\n        </tr>\n        </tfoot>\n    </table>\n</div>\n');
}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/reference-features-detail.html",'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title">Reference Features</h3>\n    </div>\n    <div class="panel-body">\n        <dl ng-if="selectedType.referenceFeatures.length > 0">\n            <dt ng-repeat-start="reference in selectedType.referenceFeatures">{{reference.shortName}}</dt>\n            <dd ng-repeat-end>\n                Value Type:&nbsp;<type-name name="reference.valueType" system-index="systemIndex"></type-name>\n            </dd>\n        </dl>\n        <p ng-if="selectedType.referenceFeatures.length === 0">\n            The selected type has no reference features.\n        </p>\n    </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/string-primitive-feature.html",'<div>\n    <h4>Common Values:</h4>\n    <table class="table table-bordered">\n        <thead>\n        <tr>\n            <th>Value</th>\n            <th>Count</th>\n            <th>Percentage</th>\n        </tr>\n        </thead>\n        <tr ng-repeat="value in string.values">\n            <td>{{value.key}}</td>\n            <td>{{value.doc_count}}</td>\n            <td>{{(100.0 * value.doc_count / string.count) | number: 2}}</td>\n        </tr>\n        <tfoot>\n        <tr>\n            <td colspan="3">\n                <p>Approximately {{string.otherUniqueValues.value - string.values.length}} other unique values not shown here.</p>\n                <p>{{string.missing.doc_count}} instances are missing values. {{100.0 * string.missing.doc_count / string.count | number: 2}}% of total</p>\n            </td>\n        </tr>\n        </tfoot>\n    </table>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/system-builder.html",'<navbar selected-link="\'systems\'"></navbar>\n<div class="page-header">\n  <h1>Add new system</h1>\n</div>\n<div class="row">\n  <div class="col-md-4">\n    <form ng-disabled="!uploading">\n      <div class="form-group">\n        <label for="systemName">System Name</label>\n        <input type="text" class="form-control" id="systemName" ng-model="systemName" placeholder="Systemname">\n      </div>\n      <div class="form-group">\n        <label for="systemDescription">System Description</label>\n        <input type="text" class="form-control" id="systemDescription" ng-model="systemDescription"\n               placeholder="System Description">\n      </div>\n      <div class="form-group">\n        <label for="files">Zip File</label>\n        <input id="files" type="file" ngf-select ng-model="file" name="file" accept="application/zip" required>\n\n        <p class="help-block">Zipped input file, should contain a file named TypeSystem.xml with the UIMA type system\n          and any number of UIMA XMI documents.</p>\n      </div>\n      <div class="form-group">\n        <label for="useXCas">Use XCas?</label>\n        <input type="checkbox" class="form-control" id="useXCas" ng-model="useXCas">\n\n        <p class="help-block">Whether or not the input contains XCas serialized files, the default is to use XMI\n          serialized files</p>\n      </div>\n      <div class="btn btn-default" ng-click="submit()">Submit</div>\n    </form>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/system-task-progress.html",'<navbar selected-link="\'systems\'"></navbar>\n<div class="page-header">\n  <h1>System Indexing Progress</h1>\n</div>\n<div class="col-md-6 col-md-offset-3" ng-if="!systemIndexingTask">\n  <h3>Preparing for System Indexing</h3>\n</div>\n<div class="col-md-6 col-md-offset-3" ng-if="systemIndexingTask">\n  <p class="text-center">Completed {{systemIndexingTask.entityCount}} of {{systemIndexingTask.total}}\n    documents.</p>\n  <uib-progressbar max="systemIndexingTask.total" value="systemIndexingTask.entityCount"></uib-progressbar>\n  <p class="text-center" ng-if="systemIndexingTask.failed">System Indexing task failed. Reason: </p>\n\n  <p ng-repeat="exception in systemIndexingTask.exceptions">\n    <span ng-repeat-start="line in exception">{{line}}</span>\n    <br ng-repeat-end>\n  </p>\n\n  <div class="text-center" ng-if="systemIndexingTask.finished && !systemIndexingTask.failed">\n    <p>\n      System indexing task completed without errors.\n    </p>\n    <p>\n      Click <a class="ng-click-link" ng-click="goToSystem()">here</a> to continue to system information.\n    </p>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/system-types-list.html",'<input type="text" class="form-control" placeholder="Filter types" ng-model="filter">\n<div class="panel panel-default">\n  <div class="panel-heading">\n    <h3 class="panel-title">Types</h3>\n  </div>\n\n  <table class="table table-hover">\n    <tr ng-repeat="type in types">\n      <td ng-class="{\'true\':\'info\', \'false\':\'\'}[selectedTypeName === type.typeName]" ng-click="selectType(type)"\n          class="ng-click-link">\n        <type-name name="type.typeName" unlinked></type-name>\n      </td>\n    </tr>\n  </table>\n</div>\n<div class="text-center">\n  <uib-pagination ng-model="pagination.page" total-items="pagination.totalItems" items-per-page="pagination.itemsPerPage"\n              max-size="5" previous-text="&lsaquo;" next-text="&rsaquo;" boundary-links="true"\n              first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/system.html",'<navbar selected-link="\'systems\'"></navbar>\n<div class="row" ng-if="deleteWarned">\n  <div class="col-md-12">\n    <div class="alert alert-danger" role="alert">Warning: deleting a system is permanent, click "Delete System" again to\n      continue.\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-12">\n    <h2>{{system.system}}\n      &nbsp;\n      <small><a class="ng-click-link" ng-click="deleteSystem()">Delete System</a></small>\n    </h2>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-3">\n    <system-types-list></system-types-list>\n  </div>\n  <div class="col-md-9" ng-if="selectedTypeName">\n    <uib-tabset justified="true" ng-if="selectedType">\n      <uib-tab heading="Info" active="infoActive" select="selectedInfo()">\n        <type-info ng-if="infoActive"></type-info>\n      </uib-tab>\n      <uib-tab heading="Primitive Features" active="primitivesActive" select="selectedPrimitives()">\n        <uib-accordion close-others="false" ng-if="selectedType.primitiveFeatures.length > 0">\n          <uib-accordion-group ng-repeat="primitiveFeature in selectedType.primitiveFeatures"\n                           is-open="primitiveFeature.isOpen">\n            <uib-accordion-heading>\n              {{primitiveFeature.shortName}} ({{primitiveFeature.valueType}})\n            </uib-accordion-heading>\n            <div ng-if="primitiveFeature.isOpen && primitiveFeature.valueType === \'uima.cas.Boolean\'">\n              <boolean-primitive-feature feature="primitiveFeature" system-index="systemIndex"\n                                         selected-type="selectedType"></boolean-primitive-feature>\n            </div>\n            <div ng-if="primitiveFeature.isOpen && primitiveFeature.valueType === \'uima.cas.String\'">\n              <string-primitive-feature feature="primitiveFeature" system-index="systemIndex"\n                                        selected-type="selectedType"></string-primitive-feature>\n            </div>\n            <div ng-if="primitiveFeature.isOpen && primitiveFeature.valueType === \'uima.cas.Integer\'">\n              <int-primitive-feature feature="primitiveFeature" system-index="systemIndex"\n                                     selected-type="selectedType"></int-primitive-feature>\n            </div>\n            <div ng-if="primitiveFeature.isOpen && primitiveFeature.valueType === \'uima.cas.Float\'">\n              <float-primitive-feature feature="primitiveFeature" system-index="systemIndex"\n                                       selected-type="selectedType"></float-primitive-feature>\n            </div>\n          </uib-accordion-group>\n        </uib-accordion>\n        <div class="panel panel-default" ng-show="selectedType.primitiveFeatures.length === 0">\n          <div class="panel-body">\n            <p>The selected type has no primitive features.</p>\n          </div>\n        </div>\n      </uib-tab>\n      <uib-tab heading="Reference Features" active="referencesActive" select="selectedReferences()">\n        <reference-features-detail ng-if="referencesActive"></reference-features-detail>\n      </uib-tab>\n      <uib-tab heading="Instances" active="instancesActive" select="selectedInstances()">\n        <instances-detail ng-if="instancesActive"></instances-detail>\n      </uib-tab>\n    </uib-tabset>\n    <div class="panel panel-default" ng-if="!selectedType">\n      <div class="panel-heading">\n        <h3 class="panel-title">\n          <type-name name="selectedTypeName" unlinked></type-name>\n        </h3>\n      </div>\n      <div class="panel-body">\n        This type has no instances included in the results from {{system.system}}. It is either not used or is\n        not saved in the CAS output.\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/systems-list.html",'<navbar selected-link="\'systems\'"></navbar>\n<div class="row" ng-if="deleteWarned">\n  <div class="col-md-12">\n    <div class="alert alert-danger" role="alert">Warning: deleting a system is permanent, click again to\n      continue.\n    </div>\n  </div>\n</div>\n<div class="page-header">\n  <h1>Type Systems</h1>\n</div>\n<div class="row">\n  <div class="col-md-12">\n    <table class="table table-hover">\n      <tbody>\n      <tr ng-repeat="system in systems" class="system-row ng-click-link" ng-click="selectSystem(system.index)">\n        <td class="system-info">\n          <h4>{{system.system}}</h4>\n\n          <p>Description: {{system.description}}</p>\n\n          <p>Added On: {{system.created | date:\'longDate\'}}</p>\n        </td>\n        <td ng-if="isSecure">\n          <div class="accessory-container">\n            <button class="btn btn-danger" ng-click="deleteSystem($event, system.index)"><span\n              class="glyphicon glyphicon-minus"></span></button>\n          </div>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n    <a ng-if="isSecure" href="#/system-builder" class="btn btn-lg btn-primary">Add System</a>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/systems/type-info.html",'<div class="panel panel-default">\n    <div class="panel-heading">\n        <h3 class="panel-title">{{selectedType.typeShortName}}</h3>\n    </div>\n    <div class="panel-body">\n        <h5>Full Name</h5>\n        <p>{{selectedType.typeName}}</p>\n        <h5>Instances</h5>\n        <p>{{countOfType}}</p>\n        <p>{{100.0 * countOfType / totalFeatureStructures | number : 2}}% of {{totalFeatureStructures}} total.</p>\n        <h5>Parent Types Inherited From:</h5>\n        <ul class="list-unstyled">\n            <li ng-repeat="parentType in selectedType.parentTypes">\n                <type-name name="parentType" system-index="systemIndex"></type-name>\n            </li>\n        </ul>\n        <h5>Child Types:</h5>\n        <ul class="list-unstyled">\n            <li ng-repeat="child in children">\n                <type-name name="child" system-index="systemIndex"></type-name>\n            </li>\n        </ul>\n    </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/analysis-builder-examples.html",'<uib-tabset justified="true" ng-if="config.selectedType">\n  <uib-tab heading="Info">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <span>Total Instances: {{examplesPagination.totalItems}}</span>\n      </div>\n    </div>\n  </uib-tab>\n  <uib-tab heading="Examples">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <fs-instance-info feature-structure="example"></fs-instance-info>\n      </div>\n      <pagination items-per-page="examplesPagination.itemsPerPage" total-items="examplesPagination.totalItems"\n                  ng-model="examplesPagination.page" max-size="6" boundary-links="false"></pagination>\n    </div>\n  </uib-tab>\n  <uib-tab heading="Feature Values" ng-if="config.selectedFeature">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div ng-if="config.selectedFeature.valueType === \'uima.cas.Boolean\'">\n          <boolean-primitive-feature feature="config.selectedFeature" system-index="config.selectedSystem.index"\n                                     selected-type="config.selectedType"></boolean-primitive-feature>\n        </div>\n        <div ng-if="config.selectedFeature.valueType === \'uima.cas.String\'">\n          <string-primitive-feature feature="config.selectedFeature" system-index="config.selectedSystem.index"\n                                    selected-type="config.selectedType"></string-primitive-feature>\n        </div>\n        <div ng-if="config.selectedFeature.valueType === \'uima.cas.Integer\'">\n          <int-primitive-feature feature="config.selectedFeature" system-index="config.selectedSystem.index"\n                                 selected-type="config.selectedType"></int-primitive-feature>\n        </div>\n        <div ng-if="config.selectedFeature.valueType === \'uima.cas.Float\'">\n          <float-primitive-feature feature="config.selectedFeature" system-index="config.selectedSystem.index"\n                                   selected-type="config.selectedType"></float-primitive-feature>\n        </div>\n      </div>\n    </div>\n  </uib-tab>\n</uib-tabset>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/analysis-builder.html",'<navbar selected-link="\'analysis\'"></navbar>\n<div class="container">\n\n  <div class="page-header">\n    <h1>Run New Analysis</h1>\n  </div>\n  <div class="panel panel-default">\n    <div class="panel-body">\n      <div class="row">\n        <div class="col-md-6">\n          <h3 class="text-left">Hypothesis Unit of Analysis</h3>\n          <unit-of-analysis unit-of-analysis="firstUnitOfAnalysis" systems="systems"\n                            add-feature-value-mapping="addHypothesisFeatureValueMapping"></unit-of-analysis>\n        </div>\n        <div class="col-md-6">\n          <h3 class="text-left">Reference Unit of Analysis</h3>\n          <unit-of-analysis unit-of-analysis="secondUnitOfAnalysis" systems="systems"\n                            add-feature-value-mapping="addReferenceFeatureValueMapping"></unit-of-analysis>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <h3 ng-if="featureValueMappings.length > 0">Feature Value Mappings</h3>\n\n  <div class="panel panel-default" ng-repeat="featureValueMapping in featureValueMappings">\n    <div class="panel-body">\n      <div class="row">\n        <div class="col-md-5">\n          <b ng-if="featureValueMapping.hypothesisFeature">Feature:</b>\n          <feature-on feature-name="featureValueMapping.hypothesisFeature.feature.name"></feature-on>\n          <br>\n\n          <div ng-if="featureValueMapping.hypothesisFeature.nestedStructure.length > 0">\n            <b>On Nested Structure:</b>\n            <ul>\n              <li ng-repeat="nestedItem in featureValueMapping.hypothesisFeature.nestedStructure">\n                <feature-on feature-name="nestedItem"></feature-on>\n              </li>\n            </ul>\n          </div>\n          <b ng-if="featureValueMapping.hypothesisFeature">Is Collection:</b>\n          {{{\'true\': \'Yes\', \'false\': \'No\'}[featureValueMapping.hypothesisIsCollection]}}<br>\n          <a href="javascript:" ng-if="featureValueMapping.hypothesisFeature"\n             ng-click="removeHypothesisFeature($index)">Delete</a>\n        </div>\n        <div class="col-md-2">\n          <form class="form-inline text-center">\n            <form class="form-group">\n              <label for="equivalenceOptions" class="sr-only">Equivalence</label>\n              <select id="equivalenceOptions" ng-if="featureValueMapping.equivalenceOptions.length > 0"\n                      class="form-control"\n                      ng-model="featureValueMapping.equivalence">\n                <option ng-repeat="eq in featureValueMapping.equivalenceOptions">{{eq}}</option>\n              </select>\n            </form>\n          </form>\n        </div>\n        <div class="col-md-5">\n          <b ng-if="featureValueMapping.referenceFeature">Feature:</b>\n          <feature-on feature-name="featureValueMapping.referenceFeature.feature.name"></feature-on>\n          <br>\n\n          <div ng-if="featureValueMapping.referenceFeature.nestedStructure.length > 0">\n            <b>On Nested Structure:</b>\n            <ul>\n              <li ng-repeat="nestedItem in featureValueMapping.referenceFeature.nestedStructure">\n                <feature-on feature-name="nestedItem"></feature-on>\n              </li>\n            </ul>\n          </div>\n          <b ng-if="featureValueMapping.referenceFeature">Is Collection:</b>\n          {{{\'true\': \'Yes\', \'false\': \'No\'}[featureValueMapping.referenceIsCollection]}}<br>\n          <a href="javascript:" ng-if="featureValueMapping.referenceFeature"\n             ng-click="removeReferenceFeature($index)">Delete</a>\n        </div>\n      </div>\n      <div class="row" ng-if="featureValueMapping.hypothesisFeature && featureValueMapping.referenceFeature">\n        <div class="col-md-12">\n          <h5>Value Transformations</h5>\n\n          <p>Values without value transformations will remain the same.</p>\n        </div>\n      </div>\n      <div class="row" ng-repeat="valueMapping in featureValueMapping.valueMappings">\n        <div class="col-md-1">\n          From:\n        </div>\n        <div class="col-md-3">\n          <feature-value-suggestion system-index="firstUnitOfAnalysis.selectedSystem.index"\n                                    type="firstUnitOfAnalysis.selectedType"\n                                    feature="featureValueMapping.hypothesisFeature.feature"\n                                    value="valueMapping.from"\n                                    on-select="valueMapping.fromSelected()"></feature-value-suggestion>\n        </div>\n        <div class="col-md-1 col-md-offset-2">\n          To:\n        </div>\n        <div class="col-md-3">\n          <feature-value-suggestion system-index="secondUnitOfAnalysis.selectedSystem.index"\n                                    type="secondUnitOfAnalysis.selectedType"\n                                    feature="featureValueMapping.referenceFeature.feature"\n                                    value="valueMapping.to"\n                                    on-select="valueMapping.toSelected()"></feature-value-suggestion>\n        </div>\n        <div class="col-md-1">\n          <p class="text-right">\n            <a href="javascript:" ng-click="featureValueMapping.removeValueMapping($index)">Delete</a>\n          </p>\n        </div>\n      </div>\n      <div class="row" ng-if="featureValueMapping.hypothesisFeature && featureValueMapping.referenceFeature">\n        <div class="col-md-12">\n          <p class="text-center">\n            <a href="javascript:" ng-click="featureValueMapping.addValueMapping()">Add Value Transformation</a>\n          </p>\n        </div>\n      </div>\n\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-10 col-md-offset-1">\n      <form>\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" ng-model="onlyCompareMatches" ng-disabled="!featureValueMappings.length"><b>Hit/Miss\n            only.</b> Ignores annotations that do not have counterparts in the other system and only compares whether\n            feature values are equivalent.\n          </label>\n        </div>\n        <p class="help-block" ng-if="!featureValueMappings.length">Disabled because there are no features selected.</p>\n\n        <div class="form-group">\n          <label for="description">Description</label>\n          <input type="text" id="description" ng-model="description" class="form-control" title="Description">\n        </div>\n        <button type="button"\n                ng-disabled="!isReadyForAnalysis()"\n                class="btn btn-primary btn-lg" ng-click="submitAnalysis()">Run Analysis\n        </button>\n        <p class="help-block" ng-if="!isReadyForAnalysis()">Disabled until both systems have types and all\n          selected features are matched.</p>\n      </form>\n    </div>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/analysis-progress.html",'<navbar selected-link="\'analysis\'"></navbar>\n<div class="page-header">\n  <h1>Analysis Progress</h1>\n</div>\n<div class="col-md-6 col-md-offset-3" ng-if="!analysisTask">\n  <h3>Preparing for Analysis</h3>\n</div>\n<div class="col-md-6 col-md-offset-3" ng-if="analysisTask">\n  <p class="text-center" ng-if="analysisTask">Completed {{analysisTask.completed}} of {{analysisTask.total}}\n    documents.</p>\n  <uib-progressbar max="analysisTask.total" value="analysisTask.completed"></uib-progressbar>\n  <p class="text-center" ng-if="analysisTask.failed">Analysis task failed. Reason: {{analysisTask.error}}</p>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/analysis-results-explore.html",'<navbar selected-link="\'analysis\'"></navbar>\n<ol class="breadcrumb">\n  <li><a href="#/analysis">Analyzed Systems</a></li>\n  <li>\n    <a\n      ng-href="#/analysis-results?tested={{matchCounts.hypothesisUnitOfAnalysis.systemIndex}}&gold={{matchCounts.referenceUnitOfAnalysis.systemIndex}}">\n      <system-name system-index="matchCounts.hypothesisUnitOfAnalysis.systemIndex" unlinked></system-name>\n      &nbsp;vs.&nbsp;\n      <system-name system-index="matchCounts.referenceUnitOfAnalysis.systemIndex" unlinked></system-name>\n    </a>\n  </li>\n  <li class="active">\n    Analysis Results Explore\n  </li>\n</ol>\n<div class="container-fluid">\n  <div class="row">\n    <div class="col-lg-5 col-md-5">\n      <confusion-matrix-table examples-of="examplesOf">\n\n      </confusion-matrix-table>\n    </div>\n    <div class="col-lg-7 col-md-7">\n      <div class="row">\n        <div class="col-lg-8 col-md-12">\n          <div class="panel panel-default">\n            <div class="panel-heading">\n              <h3 class="panel-title">Hypothesis Unit of Analysis</h3>\n            </div>\n            <div class="panel-body">\n              <h5>System:&nbsp;\n                <system-name system-index="matchCounts.hypothesisUnitOfAnalysis.systemIndex"></system-name>\n              </h5>\n              <unit-of-analysis-description unit-of-analysis="matchCounts.hypothesisUnitOfAnalysis"\n                                            feature-value-mappings="matchCounts.featureValueMappings"\n                                            is-hypothesis="true"></unit-of-analysis-description>\n            </div>\n          </div>\n          <div class="panel panel-default">\n            <div class="panel-heading">\n              <h3 class="panel-title">Reference Unit of Analysis</h3>\n            </div>\n            <div class="panel-body">\n              <h5>System:&nbsp;\n                <system-name system-index="matchCounts.referenceUnitOfAnalysis.systemIndex"></system-name>\n              </h5>\n              <unit-of-analysis-description unit-of-analysis="matchCounts.referenceUnitOfAnalysis"\n                                            feature-value-mappings="matchCounts.featureValueMappings"\n                                            is-hypothesis="false"></unit-of-analysis-description>\n            </div>\n          </div>\n        </div>\n        <div class="col-lg-4 col-md-12">\n          <div class="panel panel-default">\n            <div class="panel-heading">\n              <h3 class="panel-title">Metrics</h3>\n            </div>\n            <div class="panel-body">\n              <dl ng-if="!matchCounts.hitMissOnly">\n                <dt>Precision</dt>\n                <dd>{{matchCounts.precision | number: 3}}</dd>\n                <dt>Recall</dt>\n                <dd>{{matchCounts.recall | number: 3}}</dd>\n                <dt>F-Score</dt>\n                <dd>{{matchCounts.fMeasure | number: 3}}</dd>\n              </dl>\n              <dl ng-if="matchCounts.hitMissOnly">\n                <dt>Accuracy</dt>\n                <dd>{{matchCounts.accuracy | number: 3}}</dd>\n              </dl>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n  <div class="row">\n    <cooccurring-examples-list></cooccurring-examples-list>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/analysis-results.html",'<navbar selected-link="\'analysis\'"></navbar>\n<ol class="breadcrumb">\n  <li><a href="#/analysis">Analyzed Systems</a></li>\n  <li class="active">\n    <system-name system-index="selectedTested" unlinked></system-name>\n    &nbsp;vs.&nbsp;\n    <system-name system-index="selectedGold" unlinked></system-name>\n  </li>\n</ol>\n<table class="table table-striped table-bordered binary-classification-results">\n  <thead>\n  <tr>\n    <th>Description</th>\n    <th>\n      <p>\n        <system-name system-index="selectedTested"></system-name>\n      </p>\n      <p>\n        Hypothesis Unit of Analysis\n      </p>\n    </th>\n    <th>\n      <p>\n        <system-name system-index="selectedGold"></system-name>\n      </p>\n      <p>\n        Reference Unit of Analysis\n      </p>\n    </th>\n    <th>Precision</th>\n    <th>Recall</th>\n    <th>F-score / Accuracy</th>\n    <th>Explore</th>\n  </tr>\n  </thead>\n  <tr ng-repeat="matchCount in matchCounts">\n    <td>\n      <span ng-if="matchCount.description">{{matchCount.description}}</span>\n      <span ng-if="!matchCount.description">No description.</span>\n    </td>\n    <td>\n      <unit-of-analysis-description unit-of-analysis="matchCount.hypothesisUnitOfAnalysis"\n                                    feature-value-mappings="matchCount.featureValueMappings"\n                                    is-hypothesis="true"></unit-of-analysis-description>\n    </td>\n    <td>\n      <unit-of-analysis-description unit-of-analysis="matchCount.referenceUnitOfAnalysis"\n                                    feature-value-mappings="matchCount.featureValueMappings"\n                                    is-hypothesis="false"></unit-of-analysis-description>\n    </td>\n    <td>\n      <span ng-if="matchCount.precision">{{matchCount.precision | number: 2}}</span>\n      <span ng-if="matchCount.accuracy">&mdash;</span>\n    </td>\n    <td>\n      <span ng-if="matchCount.recall">{{matchCount.recall | number: 2}}</span>\n      <span ng-if="matchCount.accuracy">&mdash;</span>\n    </td>\n    <td>\n      <span ng-if="matchCount.fMeasure">{{matchCount.fMeasure | number: 2}} (F-Score)</span>\n      <span ng-if="matchCount.accuracy">{{matchCount.accuracy | number: 2}} (Accuracy)</span>\n    </td>\n    <td class="explore-cell">\n      <a type="button" class="btn btn-xs btn-primary"\n         ng-href="#/analysis-results-explore/{{matchCount._id}}">Explore\n        <span class="glyphicon glyphicon-arrow-right"></span></a>\n    </td>\n  </tr>\n</table>\n<div class="text-center">\n  <uib-pagination ng-model="pagination.page" items-per-page="pagination.itemsPerPage"\n              total-items="pagination.totalItems" max-size="15" boundary-links="true"></uib-pagination>\n</div>\n\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/analysis.html",'<navbar selected-link="\'analysis\'"></navbar>\n<ol class="breadcrumb">\n  <li class="active">Analyzed Systems</li>\n</ol>\n<div class="row">\n  <div class="col-md-4 col-md-offset-2">\n    <h3>Analyzed Systems</h3>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-4 col-md-offset-2">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Hypothesis Systems</h3>\n      </div>\n      <table class="table table-hover">\n        <tr ng-repeat="tested in systems" ng-class="{\'true\':\'info\', \'false\':\'\'}[selectedTested === tested.index]"\n            ng-click="selectTested(tested)">\n          <td>\n            <span ng-bind="tested.system"></span>\n            <small class="text-info" ng-bind="tested.description"></small>\n          </td>\n          <td class="text-right" ng-bind="tested.count"></td>\n        </tr>\n      </table>\n    </div>\n  </div>\n  <div class="col-md-4">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Reference Systems</h3>\n      </div>\n      <table class="table table-hover">\n        <tr ng-repeat="goldStandard in systems"\n            ng-class="{\'true\':\'info\', \'false\':\'\'}[selectedGoldStandard === goldStandard.index]"\n            ng-click="selectGoldStandard(goldStandard)">\n          <td>\n            <span ng-bind="goldStandard.system"></span>\n            <small class="text-info" ng-bind="goldStandard.description"></small>\n          </td>\n          <td class="text-right" ng-bind="goldStandard.goldCount"></td>\n        </tr>\n      </table>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-10 col-md-offset-2">\n    <p>\n      <a class="btn btn-primary" ng-disabled="!isReady"\n         href="#/analysis-results?tested={{selectedTested}}&gold={{selectedGoldStandard}}" role="button">Go</a>\n      <span ng-if="selectedGoldStandard && !isReady">There are 0 completed analysis runs with the selected systems.</span>\n    </p>\n  </div>\n</div>\n\n<div class="row" ng-if="isSecure">\n  <div class="col-md-2 col-md-offset-2">\n    <p>\n      <a class="btn btn-primary" href="#/analysis-builder" role="button">Run new analysis</a>\n    </p>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/confusion-matrix-table.html",'<table ng-if="!matchCounts.hitMissOnly" class="confusionMatrix table table-condensed table-bordered">\n  <thead>\n  <tr>\n    <th colspan="2" rowspan="2"></th>\n    <th class="secondTypeName typeName" colspan="2">\n      <h5>Hypothesis</h5>\n      <h4 class="text-primary">\n        <system-name system-index="matchCounts.hypothesisUnitOfAnalysis.systemIndex"></system-name>\n      </h4>\n      <p>\n        <type-name system-index="matchCounts.hypothesisUnitOfAnalysis.systemIndex"\n                   name="matchCounts.hypothesisUnitOfAnalysis.typeName"></type-name>\n      </p>\n    </th>\n  </tr>\n  <tr>\n    <th class="occursDoesnt">Occurs</th>\n    <th class="occursDoesnt">Does not</th>\n  </tr>\n  </thead>\n  <tr>\n    <th class="firstTypeName typeName" rowspan="2">\n      <h5>Reference</h5>\n      <h4 class="text-primary">\n        <system-name system-index="matchCounts.referenceUnitOfAnalysis.systemIndex"></system-name>\n      </h4>\n      <p>\n        <type-name system-index="matchCounts.referenceUnitOfAnalysis.systemIndex"\n                   name="matchCounts.referenceUnitOfAnalysis.typeName"></type-name>\n      </p>\n    </th>\n    <th class="occursDoesnt">Occurs</th>\n    <td class="countCell" ng-click="selectExamplesOf(\'coOccurrences\')"\n        ng-class="{true: \'active\', false: \'\'}[examplesOf === \'coOccurrences\']">\n      <button type="button" class="btn btn-md btn-primary">\n        {{matchCounts.both}}\n      </button>\n    </td>\n    <td class="countCell" ng-click="selectExamplesOf(\'secondOnly\')"\n        ng-class="{true: \'active\', false: \'\'}[examplesOf === \'secondOnly\']">\n      <button type="button" class="btn btn-md btn-primary">\n        {{matchCounts.secondOnly}}\n      </button>\n    </td>\n  </tr>\n  <tr>\n    <th class="occursDoesnt">Does not</th>\n    <td class="countCell" ng-click="selectExamplesOf(\'firstOnly\')"\n        ng-class="{true: \'active\', false: \'\'}[examplesOf === \'firstOnly\']">\n      <button type="button" class="btn btn-md btn-primary">\n        {{matchCounts.firstOnly}}\n      </button>\n    </td>\n    <td class="countCell">-</td>\n  </tr>\n</table>\n<table ng-if="matchCounts.hitMissOnly" class="confusionMatrix table table-condensed table-bordered">\n  <thead>\n  <tr>\n    <th class="occursDoesnt">Hit</th>\n    <th class="occursDoesnt">Miss</th>\n  </tr>\n  </thead>\n  <tr>\n    <td class="countCell" ng-click="selectExamplesOf(\'coOccurrences\')"\n        ng-class="{true: \'active\', false: \'\'}[examplesOf === \'coOccurrences\']">\n      <button type="button" class="btn btn-md btn-primary">\n        {{matchCounts.hits}}\n      </button>\n    </td>\n    <td class="countCell" ng-click="selectExamplesOf(\'firstOnly\')"\n        ng-class="{true: \'active\', false: \'\'}[examplesOf === \'firstOnly\']">\n      <button type="button" class="btn btn-md btn-primary">\n        {{matchCounts.misses}}\n      </button>\n    </td>\n  </tr>\n</table>\n');
}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/cooccurring-examples-list.html",'<table class="table table-bordered">\n  <thead>\n  <tr>\n    <th>#</th>\n    <th>\n      <span>Hypothesis:&nbsp;</span><system-name system-index="matchCounts.hypothesisUnitOfAnalysis.systemIndex" unlinked></system-name>\n      &nbsp;\n      <type-name name="matchCounts.hypothesisUnitOfAnalysis.typeName" unlinked></type-name>\n    </th>\n    <th>\n      <span>Reference:&nbsp;</span><system-name system-index="matchCounts.referenceUnitOfAnalysis.systemIndex" unlinked></system-name>\n      &nbsp;\n      <type-name name="matchCounts.referenceUnitOfAnalysis.typeName" unlinked>\n    </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr ng-repeat="coOccurrenceMatch in coOccurrenceMatches" cooccurring-examples-row>\n  </tr>\n  </tbody>\n</table>\n\n<div class="text-center">\n  <uib-pagination ng-model="pagination.page" items-per-page="pagination.itemsPerPage" total-items="pagination.totalItems"\n              max-size="20">\n  </uib-pagination>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/cooccurring-examples-row.html",'<td>\n  {{$index + 1 + from}}\n</td>\n<td>\n  <fs-instance-info ng-if="firstFs" feature-structure="firstFs"></fs-instance-info>\n  <h4 ng-if="!firstFs">No matching feature structure located nearby.</h4>\n</td>\n<td>\n  <fs-instance-info ng-if="secondFs" feature-structure="secondFs"></fs-instance-info>\n  <h4 ng-if="!secondFs">No matching feature structure located nearby.</h4>\n</td>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/feature-examples-modal.html",'<div class="modal-header">\n  <h3 class="modal-title">Examples of Feature</h3>\n</div>\n<div class="modal-body">\n  <feature-values system-index="systemIndex" type="type" feature="feature"></feature-values>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-click="done()">Done</button>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/feature-value-suggestion.html",'<ui-select ng-model="selected.value">\n  <ui-select-match placeholder="Value">{{$select.selected}}</ui-select-match>\n  <ui-select-choices repeat="value in values | filter: $select.search">{{value}}</ui-select-choices>\n</ui-select>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/type-selection-modal.html",'<div class="modal-header">\n  <h3 class="modal-title">Select Type</h3>\n</div>\n<div class="modal-body">\n  <table class="table table-striped">\n    <tr ng-repeat="type in types">\n      <td>\n        <type-name name="type.typeName" unlinked></type-name>\n      </td>\n      <td class="text-right">\n        <button class="btn btn-default btn-xs" ng-click="selectType($index)">Select</button>\n      </td>\n    </tr>\n  </table>\n</div>\n<div class="row">\n  <div class="col-md-12 text-center">\n    <uib-pagination items-per-page="pagination.itemsPerPage" ng-model="pagination.page" total-items="pagination.totalItems"></uib-pagination>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/unit-of-analysis-description.html",'<h5>Type:&nbsp;\n  <type-name system-index="unitOfAnalysis.systemIndex"\n             name="unitOfAnalysis.typeName"></type-name>\n</h5>\n\n<h5>Value Mappings:</h5>\n<div ng-repeat="mapping in mappings">\n  <span><b>{{$index + 1}}:</b> {{mapping.featureName}}</span><br>\n  <span ng-if="mapping.nestedStructure">Nested on:</span>\n  <ul ng-if="mapping.nestedStructure">\n    <li ng-repeat="feature in mapping.nestedStructure">{{feature}}</li>\n  </ul>\n</div>\n')}])}(),function(e){try{e=angular.module("nlptabPartials")}catch(t){e=angular.module("nlptabPartials",[])}e.run(["$templateCache",function(e){e.put("/partials/type_systems_analysis/unit-of-analysis.html",'<h5>System</h5>\n<p>\n  <ui-select ng-model="unitOfAnalysis.selectedSystem" theme="bootstrap">\n    <ui-select-match placeholder="System Name">\n      <span>{{$select.selected.system}}</span>\n      <small>{{$select.selected.description}}</small>\n    </ui-select-match>\n    <ui-select-choices repeat="system in systems | filter: $select.search">\n      <span ng-bind-html="system.system | highlight: $select.search"></span>\n      <small ng-bind-html="system.description | highlight: $select.search"></small>\n    </ui-select-choices>\n  </ui-select>\n</p>\n\n<h5>Type</h5>\n<div class="row">\n  <div class="col-md-10">\n    <ui-select ng-model="unitOfAnalysis.selectedType" ng-disabled="!unitOfAnalysis.selectedSystem">\n      <ui-select-match placeholder="Type Name">\n        <span>{{$select.selected.typeShortName}}</span>\n      </ui-select-match>\n      <ui-select-choices max-size="30"\n                         repeat="uimaType in types"\n                         refresh="fetchTypes($select.search)"\n                         refresh-delay="0">\n        <span ng-bind-html="uimaType.typeShortName | highlight: $select.search"></span>\n      </ui-select-choices>\n    </ui-select>\n  </div>\n  <div class="col-md-2 text-right">\n    <button class="btn btn-default btn-sm" ng-click="openTypeSelection()"><span class="glyphicon glyphicon-list"></span>\n    </button>\n  </div>\n</div>\n\n<h5 ng-if="unitOfAnalysis.selectedType">Tree</h5>\n<table ng-if="unitOfAnalysis.selectedType" class="table table-striped">\n  <tbody>\n  <tr ng-repeat="item in tree">\n    <td>\n      <div class="row">\n\n        <div ng-class="item.class">\n          {{item.feature.shortName}} <span ng-if="item.subclass">on <type-name name="item.onType"\n                                                                               system-index="unitOfAnalysis.selectedSystem.systemIndex"></type-name> </span>\n          <a ng-if="item.primitive"\n             ng-click="examples($index)">Examples</a><br>\n          <small>\n            <type-name name="item.feature.valueType" unlinked>\n          </small>\n        </div>\n      </div>\n    </td>\n    <td class="text-right">\n      <button ng-if="item.primitive" class="btn btn-success btn-xs" ng-click="addFeature($index)">\n        Select Feature\n      </button>\n      <button ng-if="item.primitive && item.level == 0 && !item.collection" class="btn btn-success btn-xs" ng-click="addFilter($index)">\n        Add Filter\n      </button>\n      <button ng-if="!item.sofa && !item.primitive && !item.expanded" class="btn btn-primary btn-xs"\n              ng-click="expandItem($index)"><span class="glyphicon glyphicon-chevron-right"></span></button>\n      <button ng-if="!item.sofa && !item.primitive && item.expanded" class="btn btn-primary btn-xs"\n              ng-click="collapseItem($index)"><span class="glyphicon glyphicon-chevron-down"></span></button>\n    </td>\n  </tr>\n  </tbody>\n</table>\n\n<h5 ng-if="unitOfAnalysis.filters.length">Filters</h5>\n<table ng-if="unitOfAnalysis.filters.length" class="table table-striped">\n  <tbody>\n  <tr ng-repeat="filter in unitOfAnalysis.filters">\n    <td>\n      <b>Feature:</b>\n      <feature-on feature-name="filter.feature.name"></feature-on>\n      <br>\n      <div ng-if="filter.nestedStructure.length > 0">\n        <b>On Nested Structure:</b>\n        <ul>\n          <li ng-repeat="nestedItem in filter.nestedStructure">\n            <feature-on feature-name="nestedItem"></feature-on>\n          </li>\n        </ul>\n      </div>\n      <label for="filterOptions">Test: </label>\n      <select id="filterOptions" class="form-control" ng-model="filter.option">\n        <option ng-repeat="option in filterOptions">{{option}}</option>\n      </select>\n      <label for="filterValue">Value: </label>\n      <input id="filterValue" type="text" ng-model="filter.value">\n    </td>\n    <td class="text-right">\n      <button class="btn btn-danger btn-xs" ng-click="deleteFilter($index)">\n        <span class="glyphicon glyphicon-minus"></span>\n      </button>\n    </td>\n  </tr>\n  </tbody>\n</table>\n')}])}()},{}],2:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("DocumentSearchExploreCtrl",["$scope","$routeParams","$location","$q","sofa","systems",function(e,t,n,a,s,i){i.casProcessingIndexes.map(function(e){return e.index});e.sofaIdentifier=t.sofaIdentifier,e.sofaText=s.text,e.textSpan={begin:+t.begin,end:+t.end||e.sofaText.length},e.searchingAnnotatations=!1;var r=function(){e.highlightedRange={outer:e.textSpan},e.selectedAnnotationLocation?e.highlightedRange.inner={begin:e.selectedAnnotationLocation.begin,end:e.selectedAnnotationLocation.end}:e.highlightedRange.inner={begin:e.textSpan.begin,end:e.textSpan.begin}};e.$watch("textSpan",function(){e.selectedAnnotationLocation&&e.textSpan.begin>=e.selectedAnnotationLocation.begin&&delete e.selectedAnnotationLocation,e.selectedAnnotationLocation&&e.textSpan.end<=e.selectedAnnotationLocation.end&&delete e.selectedAnnotationLocation,n.search("begin",e.textSpan.begin).replace(),n.search("end",e.textSpan.end).replace(),r()},!0),e.selectTypeInSystem=function(t,a){e.selectedTypeInSystem===t?e.clearSelectedTypeInSystem():(e.selectedTypeInSystem=t,n.search("tindex",a).replace())},e.clearSelectedTypeInSystem=function(){delete e.selectedAnnotationLocation,r(),delete e.selectedTypeInSystem,n.search("tindex",null).replace()},e.selectAnnotationLocation=function(t){e.selectedAnnotationLocation=t,r()},e.clearSelectedText=function(){e.textSpan.begin=0,e.textSpan.end=0},e.checkSelectedText=function(){var t=window.getSelection(),n=t.getRangeAt(0);e.textSpan.begin=n.startOffset,e.textSpan.end=n.endOffset,t.removeAllRanges()},r()}])},{}],3:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("DocumentSearchCtrl",["$scope","$routeParams","$location","Sofa","nlptabConfig",function(e,t,n,a,s){e.pagination={page:1,itemsPerPage:3},e.queryString=t.q||"",e.fetching=!1;var i=new RegExp(/([\-\&\|!\(\){}\[\]\^~*?:\\\+])/g),r=new RegExp(/(["\'])/g),l=function(){var t=e.queryString.replace(r,""),l=t.replace(i,"\\$1");n.search("q",e.queryString).replace();var o=(e.pagination.page-1)*e.pagination.itemsPerPage;e.fetching=!0,a.containingPhraseInText(s.instanceName+"search",l,o,e.pagination.itemsPerPage).then(function(n){e.pagination.totalItems=n.total;for(var a=[],s=0;s<n.sofas.length;s++){var i=n.sofas[s],r=i.text.toLowerCase().indexOf(t.toLowerCase()),l=r+t.length,o={inner:{begin:r,end:r},outer:{begin:r,end:l}};a.push(o)}e.sofas=n.sofas,e.ranges=a,e.fetching=!1})};e.$watch("queryString",function(e,t){e!==t&&l()}),e.$watch("pagination.page",function(e,t){e!==t&&l()}),l(e.queryString)}])},{}],4:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("examplesInSpan",function(){return{templateUrl:"../../../partials/annotation_analysis/examples-in-span.html",restrict:"E",controller:["$scope","FeatureStructure",function(e,t){e.pagination={page:1,itemsPerPage:1};var n=function(){e.selectedTypeInSystem&&t.withTypeInSystemAtLocation(e.selectedTypeInSystem.type,e.selectedTypeInSystem.systemIndex,e.sofaIdentifier,e.textSpan.begin,e.textSpan.end,e.textSpan.begin,e.textSpan.end,e.pagination.page).then(function(t){e.pagination.totalItems=t.totalItems,e.featureStructure=t.featureStructure,e.selectAnnotationLocation(t.featureStructure.primaryLocation)})};e.$watch("pagination.page",function(e,t){e!==t&&n()}),e.$watch("selectedTypeInSystem",function(t,a){t!==a&&(e.pagination.page=1,n())}),n()}]}})},{}],5:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("fsTypesInSpanTable",function(){return{templateUrl:"../../../partials/annotation_analysis/fs-types-in-span-table.html",restrict:"E",controller:["$scope","$routeParams","$location","FeatureStructure","CasProcessingIndex",function(e,t,n,a,s){e.pagination={page:1,itemsPerPage:8},e.fetching=!1;var i=t.tpage,r=t.tindex,l=function(){e.fetching=!0,s.all(0,20).then(function(t){var n=t.casProcessingIndexes.map(function(e){return e.index});a.getTypesInRange(n,e.sofaIdentifier,e.textSpan.begin,e.textSpan.end).then(function(t){e.pagination.totalItems=t.length,e.typeInSystems=t,i&&(e.pagination.page=i,i=null),r&&(e.selectTypeInSystem(e.typeInSystems[r],r),r=null),e.fetching=!1})})};e.$watch("textSpan",function(e,t){e!==t&&l()},!0),e.$watch("pagination.page",function(t,a){if(t!==a&&(e.from=(e.pagination.page-1)*e.pagination.itemsPerPage,n.search("tpage",e.pagination.page).replace(),e.selectedTypeInSystem)){var s=e.typeInSystems.indexOf(e.selectedTypeInSystem);(s<e.from||s>=e.from+e.pagination.itemsPerPage)&&e.clearSelectedTypeInSystem()}}),l()}]}})},{}],6:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("spanEditor",function(){return{templateUrl:"../../../partials/annotation_analysis/span-editor.html",restrict:"E",transclude:!0,scope:{min:"=",max:"=",value:"="},link:function(e){e.canDecrement=function(){return e.value>e.min},e.decrement=function(){e.value--},e.canIncrement=function(){return e.value<e.max},e.increment=function(){e.value++}}}})},{}],7:[function(e,t,n){"use strict";e("./controllers/document-search"),e("./controllers/document-search-explore"),e("./directives/examples-in-span"),e("./directives/fs-types-in-span-table"),e("./directives/span-editor")},{"./controllers/document-search":3,"./controllers/document-search-explore":2,"./directives/examples-in-span":4,"./directives/fs-types-in-span-table":5,"./directives/span-editor":6}],8:[function(e,t,n){"use strict";e("../dist/templateCachePartials");var a=["ngRoute","elasticsearch","ui.bootstrap","ui.select","ngSanitize","ngFileUpload","nlptabPartials"];angular.module("nlptabApp",a).config(["$routeProvider","nlptabConfig",function(e,t){e.when("/main",{templateUrl:function(){return t.isBio?"/partials/common/bio-main.html":"/partials/common/main.html"},reloadOnSearch:!1}).when("/analysis",{templateUrl:"/partials/type_systems_analysis/analysis.html",controller:"AnalysisCtrl",reloadOnSearch:!1}).when("/analysis-results",{templateUrl:"/partials/type_systems_analysis/analysis-results.html",controller:"AnalysisResultsCtrl",reloadOnSearch:!1}).when("/analysis-results-explore/:matchCountsId",{templateUrl:"/partials/type_systems_analysis/analysis-results-explore.html",controller:"AnalysisResultsExploreCtrl",reloadOnSearch:!1,resolve:{matchCounts:["MatchCounts","$route",function(e,t){return e.withId(t.current.params.matchCountsId)}]}}).when("/analysis-progress/:analysisId",{templateUrl:"/partials/type_systems_analysis/analysis-progress.html",controller:"AnalysisProgressCtrl",reloadOnSearch:!1}).when("/analysis-builder",{templateUrl:"/partials/type_systems_analysis/analysis-builder.html",controller:"AnalysisBuilderCtrl",reloadOnSearch:!1}).when("/document-search",{templateUrl:"/partials/annotation_analysis/document-search.html",controller:"DocumentSearchCtrl",reloadOnSearch:!1}).when("/document-search/explore/:sofaIdentifier",{templateUrl:"/partials/annotation_analysis/document-search-explore.html",controller:"DocumentSearchExploreCtrl",reloadOnSearch:!1,resolve:{sofa:["$route","Sofa",function(e,n){return n.withSofaIdentifier(t.instanceName+"search",e.current.params.sofaIdentifier)}],systems:["CasProcessingIndex",function(e){return e.all(0,40)}]}}).when("/type-systems",{templateUrl:"/partials/systems/systems-list.html",controller:"SystemsListCtrl",reloadOnSearch:!1}).when("/system/:systemIndex",{templateUrl:"/partials/systems/system.html",controller:"SystemCtrl",reloadOnSearch:!1,resolve:{system:["$route","CasProcessingIndex",function(e,t){return t.withIndexName(e.current.params.systemIndex)}]}}).when("/system-builder",{templateUrl:"/partials/systems/system-builder.html",controller:"SystemBuilderCtrl",reloadOnSearch:!1}).when("/system-task-progress/:index",{templateUrl:"/partials/systems/system-task-progress.html",controller:"SystemTaskProgressCtrl",reloadOnSearch:!1}).otherwise({redirectTo:"/main"})}]),e("./annotation_analysis/index"),e("./common/index"),e("./systems/index"),e("./type_system_analysis/index")},{"../dist/templateCachePartials":1,"./annotation_analysis/index":7,"./common/index":24,"./systems/index":46,"./type_system_analysis/index":65}],9:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("FsInstanceModalCtrl",["$scope","$modalInstance","FeatureStructure","fsId","systemIndex",function(e,t,n,a,s){e.systemIndex=s,n.withId(a,s).then(function(t){e.featureStructure=t}),e.done=function(){t.dismiss("done")}}])},{}],10:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("activityIndicator",function(){return{restrict:"A",link:function(e,t,n){var a={lines:n.spinnerLines||9,length:n.spinnerLength||4,width:n.spinnerWidth||2,radius:n.spinnerRadius||4,corners:n.spinnerCorners||1,rotate:n.spinnerRotate||23,direction:n.spinnerDirection||1,color:n.spinnerColor||"#000",speed:n.spinnerSpeed||1,trail:n.spinnerTrail||60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"},s=new Spinner(a).spin(),i=t.get(0);i.style.width=2*(a.length+a.radius)+"2px",i.style.height=2*(a.length+a.radius)+"2px",i.style.position="relative",i.appendChild(s.el)}}})},{}],11:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("annotationFromSofa",function(){return{controller:["$scope","FeatureStructure","Sofa","nlptabConfig",function(e,t,n,a){e.$watch("featureStructure._id",function(t){t&&n.withSofaIdentifier(a.instanceName+"search",e.featureStructure.documentIdentifier).then(function(t){var n,a=e.featureStructure.documentLocations;if(a){for(var s=0;s<a.length;s++)(!n||n.distance>a[s].distance)&&(n=a[s]);var i=t.text,r=window.Math.max(0,n.begin-80),l=window.Math.min(i.length,n.end+80);e.preText=i.substring(r,n.begin),0!==r&&(e.preText="... "+e.preText),e.annotationText=i.substring(n.begin,n.end),e.postText=i.substring(n.end,l),l!==i.length&&(e.postText=e.postText+" ...")}})})}],restrict:"E",scope:{featureStructure:"="},templateUrl:"/partials/common/annotation-from-sofa.html"}})},{}],12:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("featureName",function(){return{template:function(e,t){return'<span tooltip="{{name}}">{{shortenedName}}</span>'},restrict:"E",scope:{name:"=",systemIndex:"="},link:function(e){if(e.name){var t=e.name.split(";");e.shortenedName=t[1];var n=t[0].replace(/_/g,".");e.systemIndex&&(e.url="#/system/"+e.systemIndex+"?type="+n+"&feature="+e.shortenedName)}}}})},{}],13:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("featureValues",["FeatureStructure",function(e){return{templateUrl:"/partials/common/feature-values.html",restrict:"E",scope:{systemIndex:"=",type:"=",feature:"="},link:function(t){var n=function(){e.termsAndMissingForFeature(t.systemIndex,t.type,e.mapToEsFeature(t.feature)).then(function(e){t.values=e.values,t.count=e.count})};n()}}}])},{}],14:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("fsInstanceId",function(){return{template:'<a ng-if="fsId" ng-click="open()">{{fsId}} <span class="glyphicon glyphicon-new-window"></span></a><span ng-if="!fsId">null</span>',scope:{fsId:"=",systemIndex:"="},restrict:"E",controller:["$scope","$modal",function(e,t){e.open=function(){e.fsId&&t.open({templateUrl:"/partials/common/fs-instance-modal.html",controller:"FsInstanceModalCtrl",size:"lg",resolve:{fsId:function(){return e.fsId},systemIndex:function(){return e.systemIndex}}})}}]}})},{}],15:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("fsInstanceInfo",function(){return{templateUrl:"/partials/common/fs-instance-info.html",restrict:"E",scope:{featureStructure:"="},link:function(e){e.isEmpty=function(e){return angular.equals(e,{})}}}})},{}],16:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("highlightedText",function(){return{restrict:"E",scope:{range:"=range",text:"=text"},link:function(e){var t=function(t){t&&(e.pre=t.substring(0,e.range.outer.begin),e.preOuter=t.substring(e.range.outer.begin,e.range.inner.begin),e.highlighted=t.substring(e.range.inner.begin,e.range.inner.end),e.postOuter=t.substring(e.range.inner.end,e.range.outer.end),e.post=t.substring(e.range.outer.end,e.text.length))};e.$watch("text",function(e){t(e)}),e.$watch("range.outer",function(){t(e.text)}),e.$watch("range.inner",function(){t(e.text)})},template:'<p class="document-text">{{pre}}<span class="annotation">{{preOuter}}</span><span class="annotationInset">{{highlighted}}</span><span class="annotation">{{postOuter}}</span>{{post}}</p>'}})},{}],17:[function(e,t,n){"use strict";e("./activity-indicator"),e("./annotation-from-sofa"),e("./feature-name"),e("./feature-values"),e("./fs-instance-id"),e("./fs-instance-info"),e("./highlighted-text"),e("./navbar"),e("./navbar-link"),e("./potential-cui"),e("./system-name"),e("./type-name")},{"./activity-indicator":10,"./annotation-from-sofa":11,"./feature-name":12,"./feature-values":13,"./fs-instance-id":14,"./fs-instance-info":15,"./highlighted-text":16,"./navbar":19,"./navbar-link":18,"./potential-cui":20,"./system-name":21,"./type-name":22}],18:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("navbarLink",function(){return{restrict:"A",require:"^navbar",link:function(e,t,n,a){n.navbarLink===a.selectedLink&&t.addClass("active")}}})},{}],19:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("navbar",function(){return{restrict:"E",templateUrl:"/partials/common/navbar.html",scope:{selectedLink:"="},controller:["$scope",function(e){e.selectedLink&&(this.selectedLink=e.selectedLink)}]}})},{}],20:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("potentialCui",function(){var e=/C[0-9]{7}/;return{template:'<span ng-if="!isCui">{{value}}</span><a ng-if="isCui" href="https://uts.nlm.nih.gov/metathesaurus.html;#{{value}};0;1;CUI;2015AA;EXACT_MATCH;*;" target="_blank">{{value}}</a>',restrict:"E",scope:{value:"="},link:function(t){t.isCui=e.test(t.value)}}})},{}],21:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("systemName",function(){return{template:function(e,t){return"undefined"!=typeof t.unlinked?"<span>{{systemName}}</span>":'<a ng-href="{{url}}">{{systemName}}</a>'},restrict:"E",scope:{systemIndex:"="},controller:["$scope","CasProcessingIndex",function(e,t){e.systemIndex&&(e.url="#/system/"+e.systemIndex,t.getSystemNameForIndex(e.systemIndex).then(function(t){e.systemName=t}))}]}})},{}],22:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("typeName",function(){return{template:function(e,t){return"undefined"!=typeof t.unlinked?'<span tooltip="{{name}}">{{shortenedName}}</span>':'<a ng-href="{{url}}" tooltip="{{name}}">{{shortenedName}}</a>'},restrict:"E",scope:{name:"=",systemIndex:"="},link:function(e){e.$watch("name",function(t){if(t){var n=t.split(".");e.shortenedName=n[n.length-1],/\[\]$/.test(e.shortenedName)&&(e.shortenedName=e.shortenedName.replace(/\[\]$/,""),e.shortenedName="Array of "+e.shortenedName,e.name=t.replace(/\[\]$/,"")),e.systemIndex&&(e.url="#/system/"+e.systemIndex+"?type="+e.name+"&info")}})}}})},{}],23:[function(e,t,n){"use strict";angular.module("nlptabApp").filter("startAt",function(){return function(e,t){return t=+t,e&&e.slice(t)}})},{}],24:[function(e,t,n){"use strict";e("./controller/fs-instance-modal"),e("./directives/index"),e("./filters/start-at"),e("./services/index")},{"./controller/fs-instance-modal":9,"./directives/index":17,"./filters/start-at":23,"./services/index":28}],25:[function(e,t,n){"use strict";angular.module("nlptabApp").service("CasProcessingIndex",["Es","$q","nlptabConfig","$http",function(e,t,n,a){var s={};this.getSystemNameForIndex=function(e){var n=t.defer(),a=s[e];return a?n.resolve(a):this.withIndexName(e).then(function(t){a=t.system,s[e]=a,n.resolve(a)},function(e){n.reject(e)}),n.promise},this.withIndexName=function(t){return e.search({index:n.instanceName+"metadata",type:"SystemIndex",body:{size:1,query:{match:{index:t}}}}).then(function(e){return e&&e.hits&&e.hits.hits&&e.hits.hits.length>0?e.hits.hits[0]._source:{}})},this.search=function(t,a){return e.search({index:n.instanceName+"metadata",type:"SystemIndex",body:{from:0,size:a,query:{multi_match:{query:t,type:"cross_fields",operator:"and",fields:["system","description"]}}}})},this.all=function(){return e.search({index:n.instanceName+"metadata",type:"SystemIndex",body:{from:0,size:30,query:{term:{ready:!0}}}}).then(function(e){return e&&e.hits&&e.hits.hits?{total:e.hits.total,casProcessingIndexes:e.hits.hits.map(function(e){return e._source})}:{total:0,casProcessingIndexes:[]}})},this.deleteSystem=function(e){return a.post(n.esPath+"/_nlptab-deletesystem?instance="+n.instanceName+"&id="+e)}}])},{}],26:[function(e,t,n){"use strict";angular.module("nlptabApp").service("Es",["esFactory","$location","nlptabConfig",function(e,t,n){return e({host:n.esServer})}])},{}],27:[function(e,t,n){"use strict";angular.module("nlptabApp").service("FeatureStructure",["$q","Es",function(e,t){function n(e){return e.hits.hits.map(function(e){return angular.extend(e._source,{_index:e._index,_id:e._id})})}this.withId=function(n,a){var s={};a&&(s.index=a),s.type="FeatureStructure",s.body={query:{ids:{values:[n]}},size:1};var i=e.defer();return t.search(s).then(function(e){e&&e.hits&&e.hits.hits&&e.hits.hits.length>0?i.resolve(angular.extend(e.hits.hits[0]._source,{_index:e.hits.hits[0]._index,_id:e.hits.hits[0]._id})):i.resolve(null)}),i.promise},this.ofType=function(a,s,i,r){return t.search({index:a,type:"FeatureStructure",body:{size:r,from:i,query:{match:{types:s}}}}).then(function(t){return t&&t.hits&&t.hits.hits?{total:t.hits.total,featureStructures:n(t)}:e.reject()})},this.primaryTypesFor=function(n,a){return t.search({index:n,type:"FeatureStructure",body:{size:0,query:{term:{types:{value:a}}},aggs:{typeNames:{terms:{field:"primaryType",size:0,order:{_term:"asc"}}}}}}).then(function(t){return t&&t.aggregations&&t.aggregations.typeNames&&t.aggregations.typeNames.buckets?t.aggregations.typeNames.buckets.map(function(e){return e.key}):e.reject()})},this.ofTypeWithoutPrimaryTypes=function(a,s,i,r){return t.search({index:a,type:"FeatureStructure",body:{size:r.getSize(),from:r.getFrom(),query:{bool:{must:[{term:{types:{value:s}}}],must_not:[{terms:{primaryType:i}}]}}}}).then(function(t){return t&&t.hits&&t.hits.hits?(r.totalItems=t.hits.total,n(t)):e.reject()})},this.termsNotIn=function(e,n,a,s,i){var r=0===a.indexOf("booleanFeatures");return t.search({index:e,type:"FeatureStructure",body:{size:0,query:{bool:{must:[{term:{types:n}}],must_not:[{terms:{feature:s}}]}},aggs:{values:{terms:{field:a,size:angular.isDefined(i)?i:10}},missingValues:{missing:{field:a}}}}}).then(function(e){var t={};return e&&e.aggregations&&e.aggregations.values&&(t.values=e.aggregations.values.buckets,r&&(t.values=t.values.map(function(e){return e.key="T"===e.key,e}))),e&&e.aggregations&&e.aggregations.missingValues&&(t.missing=e.aggregations.missingValues),e&&e.hits&&(t.count=e.hits.total),t})},this.termsAndMissingForFeature=function(e,n,a,s){var i=0===a.indexOf("booleanFeatures");return t.search({index:e,type:"FeatureStructure",body:{size:0,query:{term:{types:n}},aggs:{values:{terms:{field:a,size:angular.isDefined(s)?s:10}},missingValues:{missing:{field:a}}}}}).then(function(e){var t={};return e&&e.aggregations&&e.aggregations.values&&(t.values=e.aggregations.values.buckets,i&&(t.values=t.values.map(function(e){return e.key="T"===e.key,e}))),e&&e.aggregations&&e.aggregations.missingValues&&(t.missing=e.aggregations.missingValues),e&&e.hits&&(t.count=e.hits.total),t})},this.termsMissingAndCardinalityForFeature=function(e,n,a,s){return t.search({index:e,type:"FeatureStructure",body:{size:0,query:{term:{types:n}},aggs:{values:{terms:{field:a,size:angular.isUndefined(s)?10:s}},missingValues:{missing:{field:a}},others:{cardinality:{field:a,precision_threshold:1e4}}}}}).then(function(e){var t={};return e&&e.aggregations&&e.aggregations.values&&(t.values=e.aggregations.values.buckets),e&&e.aggregations&&e.aggregations.missingValues&&(t.missing=e.aggregations.missingValues),e&&e.aggregations&&e.aggregations.others&&(t.otherUniqueValues=e.aggregations.others),e&&e.hits&&(t.count=e.hits.total),t})},this.termsMissingCardinalityAndPercentilesForFeature=function(n,a,s){var i=e.defer();return t.search({index:n,type:"FeatureStructure",body:{size:0,query:{term:{types:a}},aggs:{values:{terms:{field:s}},missingValues:{missing:{field:s}},others:{cardinality:{field:s,precision_threshold:1e4}},percentiles:{percentiles:{field:s}}}}}).then(function(e){var t={};if(e&&e.aggregations&&e.aggregations.values&&(t.values=e.aggregations.values.buckets),e&&e.aggregations&&e.aggregations.missingValues&&(t.missing=e.aggregations.missingValues),e&&e.aggregations&&e.aggregations.others&&(t.otherUniqueValues=e.aggregations.others),e&&e.aggregations&&e.aggregations.percentiles){var n=[];for(var a in e.aggregations.percentiles.values)e.aggregations.percentiles.values.hasOwnProperty(a)&&n.push({percentile:+a,count:e.aggregations.percentiles.values[a]});t.percentiles=n}e&&e.hits&&(t.count=e.hits.total),i.resolve(t)}),i.promise},this.countTotal=function(n){var a=e.defer();return t.search({index:n,type:"FeatureStructure",search_type:"count"}).then(function(e){e&&e.hits&&a.resolve(e.hits.total)}),a.promise},this.countOfType=function(n,a){var s=e.defer();return t.search({index:n,type:"FeatureStructure",search_type:"count",body:{query:{term:{types:a}}}}).then(function(e){e&&e.hits&&s.resolve(e.hits.total)}),s.promise},this.withTypeInSystemAtLocation=function(n,a,s,i,r,l,o,c){var u={size:1,from:c-1,query:{bool:{must:[{term:{types:n}},{term:{documentIdentifier:s}},{range:{"primaryLocation.begin":{gte:i,lte:r}}},{range:{"primaryLocation.end":{gte:l,lte:o}}}]}}};u.sort=[{"primaryLocation.begin":"asc"},{"primaryLocation.end":"asc"}];var d=e.defer();return t.search({index:a,type:"FeatureStructure",body:u}).then(function(e){var t,n=0;if(e&&e.hits&&e.hits.hits&&e.hits.hits.length>0){var a=e.hits.hits[0];t=a._source,t._id=a._id,n=e.hits.total}d.resolve({totalItems:n,featureStructure:t})}),d.promise},this.getTypesInRange=function(n,a,s,i){var r={size:0,query:{bool:{must:[{range:{"primaryLocation.begin":{gte:s,lte:i}}},{range:{"primaryLocation.end":{gte:s,lte:i}}},{term:{documentIdentifier:a}}]}},aggs:{systemTerms:{terms:{field:"system",order:{_term:"asc"},size:0},aggs:{typeTerms:{terms:{field:"types",order:{_term:"asc"},size:0}}}}}},l=e.defer();return t.search({index:n,type:"FeatureStructure",search_type:"count",body:r}).then(function(e){var t=[];if(e&&e.aggregations&&e.aggregations.systemTerms&&e.aggregations.systemTerms.buckets)for(var n=e.aggregations.systemTerms.buckets,a=0;a<n.length;a++){var s=n[a].key;if(n[a].typeTerms&&n[a].typeTerms.buckets)for(var i=n[a].typeTerms.buckets,r=0;r<i.length;r++)t.push({systemIndex:s,type:i[r].key,count:i[r].doc_count})}l.resolve(t)},function(e){l.reject()}),l.promise},this.inSystemWithType=function(e,a,s){return t.search({index:e,type:"FeatureStructure",body:{size:s.getSize(),from:s.getFrom(),query:{term:{types:a}}}}).then(function(e){return{total:e.hits.total,featureStructures:n(e)}})};var a={"uima.cas.Boolean":"booleanFeatures","uima.cas.Byte":"byteFeatures","uima.cas.Double":"doubleFeatures","uima.cas.Float":"floatFeatures","uima.cas.Integer":"intFeatures","uima.cas.Long":"longFeatures","uima.cas.Short":"shortFeatures","uima.cas.String":"stringFeatures","uima.cas.BooleanArray":"BooleanArrayFeatures","uima.cas.ByteArray":"ByteArrayFeatures","uima.cas.ShortArray":"ShortArrayFeatures",
"uima.cas.IntegerArray":"IntegerArrayFeatures","uima.cas.LongArray":"LongArrayFeatures","uima.cas.FloatArray":"FloatArrayFeatures","uima.cas.DoubleArray":"DoubleArrayFeatures","uima.cas.StringArray":"StringArrayFeatures","uima.cas.FloatList":"FloatListFeatures","uima.cas.IntegerList":"IntegerListFeatures","uima.cas.StringList":"StringListFeatures"};this.mapToEsFeature=function(e){return a[e.valueType]+"."+e.name.replace(/\./g,"_").replace(":",";")}}])},{}],28:[function(e,t,n){"use strict";e("./cas-processing-index"),e("./es"),e("./feature-structure"),e("./index"),e("./pagination"),e("./sofa"),e("./type")},{"./cas-processing-index":25,"./es":26,"./feature-structure":27,"./index":28,"./pagination":29,"./sofa":30,"./type":31}],29:[function(e,t,n){"use strict";angular.module("nlptabApp").service("Pagination",function(){function e(e,t,n){this.page=e?e:1,this.itemsPerPage=t?t:10,this.totalItems=n?n:0}e.prototype.getFrom=function(){return(this.page-1)*this.itemsPerPage},e.prototype.getSize=function(){return this.itemsPerPage},e.prototype.totalPages=function(){return this.totalItems/this.itemsPerPage},e.prototype.hasLowerPages=function(){return this.page>1},e.prototype.increment=function(){this.page=this.page+1},e.prototype.hasHigherPages=function(){return this.page<this.totalPages()},e.prototype.decrement=function(){this.page=this.page-1},e.prototype.reset=function(){this.page=1,this.totalItems=0},this.withPageAndItemsPerPage=function(t,n,a){return new e(t,n,a)}})},{}],30:[function(e,t,n){"use strict";angular.module("nlptabApp").service("Sofa",["$q","Es",function(e,t){var n=function(e){return e&&e.hits&&e.hits.hits?e.hits.hits.map(function(e){return e._source}):[]};this.containingPhraseInText=function(a,s,i,r){var l=e.defer(),o={index:a,type:"Document",body:{from:i,size:r}};return s&&s.length>0?o.body.query={query_string:{default_field:"text",query:'"'+s+'"'}}:o.body.query={match_all:{}},t.search(o).then(function(e){var t=n(e);l.resolve({total:e&&e.hits&&e.hits.total||0,sofas:t})}),l.promise},this.withSofaIdentifier=function(e,n){return t.getSource({index:e,type:"Document",id:n}).then(function(e){return e})}}])},{}],31:[function(e,t,n){"use strict";var a={"uima.cas.Boolean":"booleanFeatures","uima.cas.Byte":"byteFeatures","uima.cas.Short":"shortFeatures","uima.cas.Integer":"intFeatures","uima.cas.Long":"longFeatures","uima.cas.Float":"floatFeatures","uima.cas.Double":"doubleFeatures","uima.cas.String":"stringFeatures","uima.cas.BooleanArray":"BooleanArrayFeatures","uima.cas.ByteArray":"ByteArrayFeatures","uima.cas.ShortArray":"ShortArrayFeatures","uima.cas.IntegerArray":"IntegerArrayFeatures","uima.cas.LongArray":"LongArrayFeatures","uima.cas.FloatArray":"FloatArrayFeatures","uima.cas.DoubleArray":"DoubleArrayFeatures","uima.cas.StringArray":"StringArrayFeatures","uima.cas.FloatList":"FloatListFeatures","uima.cas.IntegerList":"IntegerListFeatures","uima.cas.StringList":"StringListFeatures"};angular.module("nlptabApp").service("Type",["$q","Es",function(e,t){this.allInSystem=function(e,n,a,s,i){var r={index:e,type:"Type",body:{from:n,size:a,query:{},sort:[{"typeShortName.raw":{order:"asc"}}]}};return s&&s.length>0?r.body.query.match={typeShortName:s}:r.body.query.match_all={},i&&(r.body._source=i),t.search(r).then(function(e){if(e&&e.hits&&e.hits.hits){var t=e.hits.hits.map(function(e){return angular.extend(e._source,{_id:e._id})});return{total:e.hits.total,types:t}}return{total:0,types:[]}})},this.withName=function(n,a){return t.search({index:n,type:"Type",body:{size:1,query:{term:{typeName:a}}}}).then(function(t){return t&&t.hits&&t.hits.hits&&t.hits.hits.length>0?t.hits.hits[0]._source:e.reject("not found")})},this.findChildren=function(n,a){return t.search({index:n,type:"Type",body:{size:0,query:{term:{"parentTypes.raw":a}},aggs:{typeNames:{terms:{field:"typeName",size:0,order:{_term:"asc"}}}}}}).then(function(t){return t&&t.aggregations&&t.aggregations.typeNames&&t.aggregations.typeNames.buckets?t.aggregations.typeNames.buckets.map(function(e){return e.key}):e.reject()})},this.subclasses=function(e,n){return t.search({index:e,type:"Type",body:{size:30,query:{term:{"parentTypes.raw":n}}}}).then(function(e){return e&&e.hits&&e.hits.hits&&e.hits.hits.length?e.hits.hits.map(function(e){return e._source}):[]})},this.mapFeatureName=function(e){var t=a[e.valueType];return t+"."+e.name.replace(/\./g,"_").replace(":",";")}}])},{}],32:[function(e,t,n){"use strict";e("./system"),e("./system-builder"),e("./system-task-progress"),e("./systems-list")},{"./system":35,"./system-builder":33,"./system-task-progress":34,"./systems-list":36}],33:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("SystemBuilderCtrl",["$scope","SystemIndexingTasks","$location","$modal",function(e,t,n,a){e.systemName="",e.systemDescription="",e.useXCas=!1,e.uploading=!1,e.submit=function(){e.uploading=!0;var s=a.open({template:'<div><h3>Uploading File</h3><p><progressbar value="progress"></progressbar></p></div>'});t.indexMetadata(e.systemName,e.systemDescription).then(function(a){t.indexSystem(a,e.file,e.useXCas).progress(function(t){e.progress=t.loaded/t.total*100}).then(function(t){e.progress=1,s.dismiss("done"),n.path("/system-task-progress/"+t.data.index)})})}}])},{}],34:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("SystemTaskProgressCtrl",["$scope","$interval","$route","$location","SystemIndexingTasks",function(e,t,n,a,s){e.index=n.current.params.index;var i=function(){s.withId(e.index).then(function(t){e.systemIndexingTask=t})},r=t(function(){i()},3e3),l=function(){angular.isDefined(r)&&(t.cancel(r),r=void 0)};e.goToSystem=function(){a.path("/system/"+e.index)},i(),e.$on("$destroy",function(){l()})}])},{}],35:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("SystemCtrl",["$routeParams","$location","$scope","system","Type","CasProcessingIndex","$route",function(e,t,n,a,s,i,r){n.systemIndex=e.systemIndex,n.system=a,n.infoActive=!0,n.primitivesActive=!1,n.referencesActive=!1,n.instancesActive=!1,n.deleteWarned=!1,n.$watch(function(){return t.search()},function(e){l(e)},!0);var l=function(e){n.infoActive=!!e.info,n.primitivesActive=!!e.primitives,n.referencesActive=!!e.references,n.instancesActive=!!e.instances,e.type?n.selectedTypeName=e.type:delete n.selectedTypeName};l(e),n.deleteSystem=function(){n.deleteWarned?i.deleteSystem(n.systemIndex).then(function(){t.path("/type-systems"),r.reload()}):n.deleteWarned=!0},n.selectedInfo=function(){n.selectedTypeName&&(o(),t.search("info",!0).replace())},n.selectedPrimitives=function(){n.selectedTypeName&&(o(),t.search("primitives",!0).replace())},n.selectedReferences=function(){n.selectedTypeName&&(o(),t.search("references",!0).replace())},n.selectedInstances=function(){n.selectedTypeName&&(o(),t.search("instances",!0).replace())};var o=function(){t.search("info",null).replace(),t.search("primitives",null).replace(),t.search("references",null).replace(),t.search("instances",null).replace()};n.selectType=function(e){var a=e.typeName;n.selectedTypeName!==a?(n.selectedTypeName=a,t.search("type",n.selectedTypeName).search("info",!0).replace()):n.clearSelectedType()},n.clearSelectedType=function(){delete n.selectedTypeName,o(),t.search("type",null).replace(),t.search("info",!0).replace()},n.$watch("selectedTypeName",function(e){e&&s.withName(n.systemIndex,n.selectedTypeName).then(function(e){n.selectedType=e},function(e){delete n.selectedType})})}])},{}],36:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("SystemsListCtrl",["$location","$routeParams","$scope","CasProcessingIndex","nlptabConfig","$route",function(e,t,n,a,s,i){n.isSecure=s.isSecure,n.pagination={from:0,size:10},n.deleteWarned=!1,n.fetchSystems=function(){a.all(n.pagination).then(function(e){n.pagination.total=e.total,n.systems=e.casProcessingIndexes})},n.selectSystem=function(t){e.path("/system/"+t)},n.deleteSystem=function(e,t){e.stopPropagation(),n.deleteWarned?a.deleteSystem(t).then(function(){n.fetchSystems()}):n.deleteWarned=!0},n.fetchSystems()}])},{}],37:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("booleanPrimitiveFeature",function(){return{templateUrl:"../../../partials/systems/boolean-primitive-feature.html",restrict:"E",scope:{feature:"=",systemIndex:"=",selectedType:"=",values:"="},controller:["$scope","FeatureStructure",function(e,t){t.termsAndMissingForFeature(e.systemIndex,e.selectedType.typeName,"booleanFeatures."+e.feature.name.replace(/\./g,"_").replace(/:/g,";")).then(function(t){e.bool=t,e.values&&(e.values.values=t.values.map(function(e){return e.key}))})}]}})},{}],38:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("floatPrimitiveFeature",function(){return{templateUrl:"../../../partials/systems/float-primitive-feature.html",restrict:"E",scope:{feature:"=",systemIndex:"=",selectedType:"=",values:"="},controller:["$scope","FeatureStructure",function(e,t){t.termsMissingCardinalityAndPercentilesForFeature(e.systemIndex,e.selectedType.typeName,"floatFeatures."+e.feature.name.replace(/\./g,"_").replace(/:/g,";")).then(function(t){e["float"]=t})}]}})},{}],39:[function(e,t,n){"use strict";e("./boolean-primitive-feature"),e("./float-primitive-feature"),e("./instances-detail"),e("./int-primitive-feature"),e("./reference-features-detail"),e("./string-primitive-feature"),e("./system-types-list"),e("./type-info")},{"./boolean-primitive-feature":37,"./float-primitive-feature":38,"./instances-detail":40,"./int-primitive-feature":41,"./reference-features-detail":42,"./string-primitive-feature":43,"./system-types-list":44,"./type-info":45}],40:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("instancesDetail",function(){return{templateUrl:"../../../partials/systems/instances-detail.html",restrict:"E",controller:["$scope","FeatureStructure","Pagination",function(e,t,n){e.instancesPagination=n.withPageAndItemsPerPage(1,1),e.childTypes=[],e.toggleType=function(t){var n=e.childTypes[t];n.isSelected=!n.isSelected,e.instancesPagination.reset(),s()},e.invertTypeSelection=function(){e.childTypes=e.childTypes.map(function(e){return e.isSelected=!e.isSelected,e}),e.instancesPagination.reset(),s()};var a=function(){e.instancesPagination.reset(),e.selectedType&&t.primaryTypesFor(e.systemIndex,e.selectedType.typeName).then(function(t){e.childTypes=t.map(function(e){return{isSelected:!0,name:e}}),s()})},s=function(){e.featureStructureInstance=void 0;var n,a=[];for(n=0;n<e.childTypes.length;n++){var s=e.childTypes[n];s.isSelected||a.push(s.name)}t.ofTypeWithoutPrimaryTypes(e.systemIndex,e.selectedType.typeName,a,e.instancesPagination).then(function(t){t.length>0&&(e.featureStructureInstance=t[0])})};e.$watch("selectedType",function(){a()}),e.$watch("instancesPagination.page",function(){s()})}]}})},{}],41:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("intPrimitiveFeature",function(){return{templateUrl:"../../../partials/systems/int-primitive-feature.html",restrict:"E",scope:{feature:"=",systemIndex:"=",selectedType:"=",values:"="},controller:["$scope","FeatureStructure",function(e,t){t.termsMissingCardinalityAndPercentilesForFeature(e.systemIndex,e.selectedType.typeName,"intFeatures."+e.feature.name.replace(/\./g,"_").replace(/:/g,";")).then(function(t){e["int"]=t,e.values&&(e.values.values=t.values.map(function(e){return e.key}))})}]}})},{}],42:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("referenceFeaturesDetail",function(){return{templateUrl:"../../../partials/systems/reference-features-detail.html",restrict:"E"}})},{}],43:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("stringPrimitiveFeature",function(){return{templateUrl:"../../../partials/systems/string-primitive-feature.html",restrict:"E",scope:{feature:"=",systemIndex:"=",selectedType:"=",values:"="},controller:["$scope","FeatureStructure",function(e,t){var n=function(){t.termsMissingAndCardinalityForFeature(e.systemIndex,e.selectedType.typeName,"stringFeatures."+e.feature.name.replace(/\./g,"_").replace(/:/g,";")).then(function(t){e.string=t,e.values&&(e.values.values=t.values.map(function(e){return e.key}))})};e.$watch("feature",function(){n()}),e.$watch("systemIndex",function(){n()}),e.$watch("selectedType",function(){n()})}]}})},{}],44:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("systemTypesList",function(){return{templateUrl:"../../../partials/systems/system-types-list.html",restrict:"E",controller:["$scope","$location","Type",function(e,t,n){e.pagination={page:1,itemsPerPage:15},e.filter="";var a=!1;e.$watch("pagination.page",function(t,n){a?a=!1:t!==n&&e.fetchTypes()}),e.$watch("filter",function(t,n){t!==n&&e.fetchTypes()}),e.fetchTypes=function(){var t=(e.pagination.page-1)*e.pagination.itemsPerPage;n.allInSystem(e.systemIndex,t,e.pagination.itemsPerPage,e.filter,"typeName").then(function(t){e.pagination.totalItems=t.total,e.types=t.types})},e.fetchTypes()}]}})},{}],45:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("typeInfo",function(){return{restrict:"E",templateUrl:"../../../partials/systems/type-info.html",controller:["$scope","FeatureStructure","Type",function(e,t,n){t.countTotal(e.systemIndex).then(function(t){e.totalFeatureStructures=t}),e.$watch("selectedType.typeName",function(a){a&&(t.countOfType(e.systemIndex,a).then(function(t){e.countOfType=t}),n.findChildren(e.systemIndex,e.selectedType.typeName).then(function(t){e.children=t}))})}]}})},{}],46:[function(e,t,n){"use strict";e("./controllers/index"),e("./directives/index"),e("./services/system-indexing-tasks")},{"./controllers/index":32,"./directives/index":39,"./services/system-indexing-tasks":47}],47:[function(e,t,n){"use strict";angular.module("nlptabApp").service("SystemIndexingTasks",["$q","Es","nlptabConfig","$http","Upload",function(e,t,n,a,s){this.withId=function(e){return t.getSource({index:n.instanceName+"metadata",type:"SystemIndexTask",id:e})},this.indexMetadata=function(e,t){return a.post(n.esPath+"/_nlptab-systemindexmeta",{systemName:e,systemDescription:t,instance:n.instanceName}).then(function(e){return e.data.index})},this.indexSystem=function(e,t,a){return s.http({url:n.esPath+"/_nlptab-systemindex?instance="+n.instanceName+"&index="+e+"&useXCas="+a,headers:{"Content-Type":t.type},data:t})}}])},{}],48:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("AnalysisBuilderCtrl",["$scope","$location","CasProcessingIndex","AnalysisTasks",function(e,t,n,a){e.systems=[],e.firstUnitOfAnalysis={filters:[]},e.secondUnitOfAnalysis={filters:[]},e.featureValueMappings=[],e.onlyCompareMatches=!1,e.description="",e.fetchSystems=function(){n.all(0,50).then(function(t){e.systems=t.casProcessingIndexes})};var s=function(t){for(var n=0;e.featureValueMappings[n]&&e.featureValueMappings[n][t];)n++;return e.featureValueMappings[n]||e.featureValueMappings.push(a.createFeatureValueMapping()),e.featureValueMappings[n]};e.$watch("firstUnitOfAnalysis.selectedType",function(){for(var t=0;t<e.featureValueMappings.length;t++)e.featureValueMappings[t].hypothesisFeature=void 0}),e.$watch("secondUnitOfAnalysis.selectedType",function(){for(var t=0;t<e.featureValueMappings.length;t++)e.featureValueMappings[t].referenceFeature=void 0});var i=function(e){e.hypothesisFeature&&(e.hypothesisIsCollection?e.referenceIsCollection?(e.equivalence="any are in",e.equivalenceOptions=["any are in","none are in","all are in","equals"]):(e.equivalence="any are equal to",e.equivalenceOptions=["any are equal to","none are equal to"]):e.referenceIsCollection?(e.equivalence="is in",e.equivalenceOptions=["is in","is not in"]):(e.equivalence="equals",e.equivalenceOptions=["equals","does not equal"]))};e.addHypothesisFeatureValueMapping=function(e,t,n){var a=s("hypothesisFeature");a.hypothesisFeature={feature:e,nestedStructure:t},a.hypothesisIsCollection=n,i(a)},e.addReferenceFeatureValueMapping=function(e,t,n){var a=s("referenceFeature");a.referenceFeature={feature:e,nestedStructure:t},a.referenceIsCollection=n,i(a)},e.fetchSystems(),e.isReadyForAnalysis=function(){if(!e.firstUnitOfAnalysis.selectedType||!e.secondUnitOfAnalysis.selectedType)return!1;var t;for(t=0;t<e.featureValueMappings.length;t++){var n=e.featureValueMappings[t];if(!n.hypothesisFeature||!n.referenceFeature)return!1}return!0};var r=function(t){var n=e.featureValueMappings[t];n.valueMappings=[],n.referenceFeature||n.hypothesisFeature||e.featureValueMappings.splice(t,1)};e.removeReferenceFeature=function(t){e.featureValueMappings[t].referenceFeature=void 0,e.featureValueMappings[t].referenceIsCollection=void 0,r(t)},e.removeHypothesisFeature=function(t){e.featureValueMappings[t].hypothesisFeature=void 0,e.featureValueMappings[t].hypothesisIsCollection=void 0,r(t)},e.submitAnalysis=function(){a.runAnalysis(e.firstUnitOfAnalysis,e.secondUnitOfAnalysis,e.featureValueMappings,e.description,e.onlyCompareMatches).then(function(e){t.path("/analysis-progress/"+e.data.id)})}}])},{}],49:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("AnalysisProgressCtrl",["$scope","$interval","$route","$location","AnalysisTasks",function(e,t,n,a,s){e.analysisId=n.current.params.analysisId;var i=function(){s.withId(e.analysisId).then(function(t){e.analysisTask=t})},r=t(function(){i()},1e3),l=function(){angular.isDefined(r)&&(t.cancel(r),r=void 0)};e.$watch("analysisTask",function(){e.analysisTask&&e.analysisTask.finished&&(e.analysisTask.failed||a.path("/analysis-results-explore/"+e.analysisId))}),i(),e.$on("$destroy",function(){l()})}])},{}],50:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("AnalysisResultsExploreCtrl",["$q","$scope","$routeParams","matchCounts",function(e,t,n,a){t.examplesOf=n.examplesOf||"coOccurrences",t.matchCounts=a}])},{}],51:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("AnalysisResultsCtrl",["$q","$scope","$routeParams","$location","MatchCounts","Pagination",function(e,t,n,a,s,i){t.selectedTested=n.tested,t.selectedGold=n.gold,t.pagination=i.withPageAndItemsPerPage(1,15),t.$watch("pagination.page",function(e,n){e!==n&&(a.search("page",e).replace(),t.fetchMatchCounts())}),t.fetchMatchCounts=function(){s.withTestedAndGoldStandard(t.selectedTested,t.selectedGold,t.pagination).then(function(e){t.matchCounts=e.matchCounts,t.pagination.totalItems=e.total})},t.fetchMatchCounts()}])},{}],52:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("AnalysisCtrl",["$scope","$routeParams","$location","MatchCounts","nlptabConfig","CasProcessingIndex","$q","$filter",function(e,t,n,a,s,i,r,l){e.isSecure=s.isSecure,e.isReady=!1,e.selectTested=function(t,s){e.selectedTested=t.index,e.selectedGoldStandard=void 0,e.isReady=!1,n.search("reference",e.selectedTested).replace(),e.systems.map(function(e){a.countTestedAndGold(t.index,e.index).then(function(t){e.goldCount=t,s&&s()})})},e.selectGoldStandard=function(t){e.selectedGoldStandard=t.index,n.search("gold",e.selectedGoldStandard).replace(),e.isReady=t.goldCount>0},i.all().then(function(e){return r.all(e.casProcessingIndexes.map(function(e){return a.countTested(e.index).then(function(t){return e.count=t,e})}))}).then(function(n){if(e.systems=n,t.reference){var a=l("filter")(e.systems,{index:t.reference},!0);e.selectTested(a,function(){if(t.gold){var n=l("filter")(e.systems,{index:t.gold},!0);e.selectGoldStandard(n)}})}})}])},{}],53:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("FeatureExamplesModalCtrl",["$scope","$uibModalInstance","systemIndex","type","feature",function(e,t,n,a,s){e.systemIndex=n,e.type=a,e.feature=s,e.done=function(){t.dismiss("done")}}])},{}],54:[function(e,t,n){"use strict";e("./analysis"),e("./analysis-builder"),e("./analysis-progress"),e("./analysis-results"),e("./analysis-results-explore"),e("./feature-examples-modal"),e("./type-selection-modal")},{"./analysis":52,"./analysis-builder":48,"./analysis-progress":49,"./analysis-results":51,"./analysis-results-explore":50,"./feature-examples-modal":53,"./type-selection-modal":55}],55:[function(e,t,n){"use strict";angular.module("nlptabApp").controller("TypeSelectionModalCtrl",["$scope","$modalInstance","Type","Pagination","systemIndex","selectedType",function(e,t,n,a,s,i){e.pagination=a.withPageAndItemsPerPage(1,20),e.systemIndex=s,e.types=[],e.selectType=function(t){i(e.types[t]),e.done()};var r=function(){n.allInSystem(e.systemIndex,e.pagination.getFrom(),e.pagination.getSize()).then(function(t){e.pagination.totalItems=t.total,e.types=t.types})};e.$watch("pagination.page",function(){r()}),e.done=function(){t.dismiss("done")}}])},{}],56:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("confusionMatrixTable",function(){return{templateUrl:"../../../partials/type_systems_analysis/confusion-matrix-table.html",restrict:"E"}})},{}],57:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("cooccurringExamplesList",function(){return{templateUrl:"../../../partials/type_systems_analysis/cooccurring-examples-list.html",restrict:"E",controller:["$scope","CoOccurrenceMatches","Pagination",function(e,t,n){e.pagination=n.withPageAndItemsPerPage(1,1);var a={coOccurrences:"TruePositive",firstOnly:"FalsePositive",secondOnly:"FalseNegative"},s=function(){t.withTypeAndId(a[e.examplesOf],e.matchCounts.analysisId,e.pagination).then(function(t){e.pagination.totalItems=t.totalItems,e.coOccurrenceMatches=t.coOccurrenceMatches})};e.selectExamplesOf=function(t){e.examplesOf=t,s()},e.$watch("pagination.page",function(e,t){e!==t&&s()}),s()}]}})},{}],58:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("cooccurringExamplesRow",["nlptabConfig",function(e){return{templateUrl:"../../../partials/type_systems_analysis/cooccurring-examples-row.html",restrict:"A",require:"^cooccurringExamplesList",controller:["$scope","FeatureStructure",function(e,t){e.selected=!1,t.withId(e.coOccurrenceMatch.firstId,e.coOccurrenceMatch.firstSystem).then(function(t){e.firstFs=t}),t.withId(e.coOccurrenceMatch.secondId,e.coOccurrenceMatch.secondSystem).then(function(t){e.secondFs=t})}]}}])},{}],59:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("featureOn",function(){return{template:'<span ng-if="featureName">{{featureShortName}} on <type-name name="typeName" unlinked></type-name></span>',restrict:"E",scope:{featureName:"="},link:function(e){e.$watch("featureName",function(t){if(t){var n=t.indexOf(":");e.featureShortName=t.substring(n+1,t.length),e.typeName=t.substring(0,n)}})}}})},{}],60:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("featureValueSuggestion",["FeatureStructure",function(e){return{templateUrl:"../../../partials/type_systems_analysis/feature-value-suggestion.html",restrict:"E",scope:{value:"=",systemIndex:"=",type:"=",feature:"="},link:function(t){t.selected={},e.termsAndMissingForFeature(t.systemIndex,t.type.typeName,e.mapToEsFeature(t.feature),1e5).then(function(e){t.values=e.values.map(function(e){return e.key})}),t.$watch("selected.value",function(e){t.value=e})}}}])},{}],61:[function(e,t,n){"use strict";e("./confusion-matrix-table"),e("./cooccurring-examples-list"),e("./cooccurring-examples-row"),e("./feature-on"),e("./feature-value-suggestion"),e("./sets-sorts-by"),e("./unit-of-analysis"),e("./unit-of-analysis-description")},{"./confusion-matrix-table":56,"./cooccurring-examples-list":57,"./cooccurring-examples-row":58,"./feature-on":59,"./feature-value-suggestion":60,"./sets-sorts-by":62,"./unit-of-analysis":64,"./unit-of-analysis-description":63}],62:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("setsSortBy",function(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(){e.setSortBy(n.setsSortBy)}),e.$watch("sorters",function(e){var a=e.indexOf(n.setsSortBy);a>-1?(t.addClass("btn-info"),t.removeClass("btn-default")):(t.addClass("btn-default"),t.removeClass("btn-info"))})}}})},{}],63:[function(e,t,n){"use strict";angular.module("nlptabApp").directive("unitOfAnalysisDescription",function(){return{restrict:"E",scope:{unitOfAnalysis:"=",featureValueMappings:"=",isHypothesis:"="},templateUrl:"../../../partials/type_systems_analysis/unit-of-analysis-description.html",link:function(e){e.mappings=e.featureValueMappings.map(function(t){return e.isHypothesis?t.hypothesisFeature:t.referenceFeature})}}})},{}],64:[function(e,t,n){"use strict";var a=["uima.cas.BooleanArray","uima.cas.ByteArray","uima.cas.ShortArray","uima.cas.IntegerArray","uima.cas.LongArray","uima.cas.FloatArray","uima.cas.DoubleArray","uima.cas.StringArray","uima.cas.FloatList","uima.cas.IntegerList","uima.cas.StringList"];angular.module("nlptabApp").directive("unitOfAnalysis",function(){return{templateUrl:"../../../partials/type_systems_analysis/unit-of-analysis.html",restrict:"E",scope:{unitOfAnalysis:"=",systems:"=",addFeatureValueMapping:"="},controller:["$scope","Type","$uibModal",function(e,t,n){e.types=[],e.tree=[],e.filterOptions=["equals","in"],e.fetchTypes=function(n){e.unitOfAnalysis.selectedSystem&&e.unitOfAnalysis.selectedSystem.index&&t.allInSystem(e.unitOfAnalysis.selectedSystem.index,0,30,n).then(function(t){e.types=t.types})},e.openTypeSelection=function(){n.open({templateUrl:"../../../partials/type_systems_analysis/type-selection-modal.html",controller:"TypeSelectionModalCtrl",size:"lg",resolve:{systemIndex:function(){return e.unitOfAnalysis.selectedSystem.index},selectedType:function(){return function(t){e.unitOfAnalysis.selectedType=t}}}})},e.$watch("unitOfAnalysis.selectedSystem",function(t,n){t!==n&&(delete e.unitOfAnalysis.selectedType,e.fetchTypes(""))});var s=function(n,s,i){t.subclasses(e.unitOfAnalysis.systemIndex,n.typeName).then(function(t){var r,l,o=i,c=[];for(l=0;l<n.primitiveFeatures.length;l++)c.push(n.primitiveFeatures[l].shortName),e.tree.splice(o,0,{feature:n.primitiveFeatures[l],onType:n.typeName,collection:-1!==a.indexOf(n.primitiveFeatures[l].valueType),level:s,primitive:!0,"class":["col-md-"+(12-s),"col-md-offset-"+s],subclass:!1}),o++;for(r=0;r<t.length;r++)for(l=0;l<t[r].primitiveFeatures.length;l++)-1===c.indexOf(t[r].primitiveFeatures[l].shortName)&&(c.push(t[r].primitiveFeatures[l].shortName),e.tree.splice(o,0,{feature:t[r].primitiveFeatures[l],onType:t[r].typeName,collection:-1!==a.indexOf(t[r].primitiveFeatures[l].valueType),level:s,primitive:!0,"class":["col-md-"+(12-s),"col-md-offset-"+s],subclass:!0}),o++);for(l=0;l<n.referenceFeatures.length;l++)e.tree.splice(o,0,{feature:n.referenceFeatures[l],collection:-1!==n.referenceFeatures[l].valueType.indexOf("[]")||"uima.cas.FSArray"===n.referenceFeatures[l].valueType,level:s,primitive:!1,expanded:!1,sofa:"sofa"===n.referenceFeatures[l].shortName,"class":["col-md-"+(12-s),"col-md-offset-"+s]}),o++})};e.expandItem=function(n){var a=e.tree[n],i=a.feature.valueType,r=i.indexOf("[]");-1!==r&&(i=i.substring(0,r)),t.withName(e.unitOfAnalysis.selectedSystem.index,i).then(function(e){a.expanded=!0,s(e,a.level+1,n+1)})},e.collapseItem=function(t){var n=e.tree[t];n.expanded=!1;for(var a=0;e.tree[t+1+a]&&e.tree[t+1+a].level===n.level+1;)a++;e.tree.splice(t+1,a)};var i=function(t){var n,a=e.tree[t],s=a.level,i=a.collection;if(0!==s){n=[];for(var r=t-1;0!==s;){var l=e.tree[r];l.level===s-1&&(n.push(l.feature.name),i=a.collection||l.collection,s--),r--}}return{item:a,nestedPath:n,collection:i}};e.addFeature=function(t){var n=i(t);e.addFeatureValueMapping(n.item.feature,n.nestedPath,n.collection)},e.$watch("unitOfAnalysis.selectedType",function(t){e.tree=[],t&&s(t,0,0)}),e.examples=function(t){n.open({templateUrl:"../../../partials/type_systems_analysis/feature-examples-modal.html",controller:"FeatureExamplesModalCtrl",size:"lg",resolve:{systemIndex:function(){return e.unitOfAnalysis.selectedSystem.index},type:function(){return e.tree[t].onType},feature:function(){return e.tree[t].feature}}})},e.addFilter=function(t){var n=e.tree[t],a={feature:n.feature.shortName,value:"",option:"equals"};e.unitOfAnalysis.filters.push(a)},e.deleteFilter=function(t){e.unitOfAnalysis.filters.splice(t,1)}}]}})},{}],65:[function(e,t,n){"use strict";e("./controllers/index"),e("./directives/index"),e("./services/analysis-tasks"),e("./services/co-occurrence-matches"),e("./services/match-counts")},{"./controllers/index":54,"./directives/index":61,"./services/analysis-tasks":66,"./services/co-occurrence-matches":67,"./services/match-counts":68}],66:[function(e,t,n){"use strict";angular.module("nlptabApp").service("AnalysisTasks",["$q","Es","nlptabConfig","$http",function(e,t,n,a){function s(){this.valueMappings=[]}this.withId=function(e){return t.getSource({index:n.instanceName+"analysis",type:"AnalysisTask",id:e})},s.prototype.removeValueMapping=function(e){this.valueMappings.splice(e,1)},s.prototype.addValueMapping=function(){this.valueMappings.push({})},this.createFeatureValueMapping=function(){return new s},this.runAnalysis=function(e,t,s,i,r){var l={hypothesisUnitOfAnalysis:{selectedSystem:e.selectedSystem.index,selectedType:e.selectedType.typeName,filters:e.filters},referenceUnitOfAnalysis:{selectedSystem:t.selectedSystem.index,selectedType:t.selectedType.typeName,filters:t.filters},featureValueMappings:s,instance:n.instanceName,description:i,fuzzDistance:0,hitMiss:r&&r?"true":"false"};return a.post(n.esServer+"/_nlptab-analysis",l)}}])},{}],67:[function(e,t,n){"use strict";angular.module("nlptabApp").service("CoOccurrenceMatches",["$q","Es","nlptabConfig",function(e,t,n){var a=n.instanceName+"analysis";this.withTypeAndId=function(e,n,s){return t.search({index:a,type:e,body:{from:s.getFrom(),size:s.getSize(),query:{bool:{must:[{match:{analysisId:n}}],should:[{query_string:{default_field:"firstId",query:"*"}},{query_string:{default_field:"secondId",query:"*"}}]}}}}).then(function(e){return{totalItems:e.hits.total,coOccurrenceMatches:e.hits.hits.map(function(e){return e._source})}})}}])},{}],68:[function(e,t,n){"use strict";angular.module("nlptabApp").service("MatchCounts",["$q","Es","nlptabConfig",function(e,t,n){var a=n.instanceName+"analysis",s="MatchCounts";this.allTested=function(){return t.search({index:a,type:s,body:{from:0,size:0,query:{match_all:{}},aggs:{tested:{terms:{field:"hypothesisUnitOfAnalysis.systemIndex",size:10}}}}}).then(function(t){return t&&t.aggregations&&t.aggregations.tested&&t.aggregations.tested.buckets?t.aggregations.tested.buckets.map(function(e){return e.key}):e.reject("Invalid response")})},this.allGoldStandardsForTested=function(n){return t.search({index:a,type:s,body:{from:0,size:0,query:{term:{"hypothesisUnitOfAnalysis.systemIndex":n}},aggs:{gold:{terms:{field:"referenceUnitOfAnalysis.systemIndex",size:10}}}}}).then(function(t){return t&&t.aggregations&&t.aggregations.gold&&t.aggregations.gold.buckets?t.aggregations.gold.buckets.map(function(e){return e.key}):e.reject("Invalid response")})},this.withTestedAndGoldStandard=function(n,i,r){return t.search({index:a,type:s,body:{from:r.getFrom(),size:r.getSize(),query:{bool:{must:[{term:{"hypothesisUnitOfAnalysis.systemIndex":n}},{term:{"referenceUnitOfAnalysis.systemIndex":i}}]}}}}).then(function(t){return t&&t.hits&&t.hits.hits?{matchCounts:t.hits.hits.map(function(e){return angular.extend(e._source,{_id:e._id})}),total:t.hits.total}:e.reject("Invalid response")})},this.withId=function(e){return t.get({index:a,type:s,id:e}).then(function(e){return e._source})},this.countTested=function(e){return t.search({index:a,type:s,body:{from:0,size:0,query:{term:{"hypothesisUnitOfAnalysis.systemIndex":e}}}}).then(function(e){return e.hits.total})},this.countTestedAndGold=function(n,i){return t.search({index:a,type:s,body:{from:0,size:0,query:{bool:{must:[{term:{"hypothesisUnitOfAnalysis.systemIndex":n}},{term:{"referenceUnitOfAnalysis.systemIndex":i}}]}}}}).then(function(t){return t&&t.hits?t.hits.total:e.reject("Invalid response")})}}])},{}]},{},[8]);
//# sourceMappingURL=bundle.ad8e0905.js.map
